<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gennoz | Acervo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #050505;
            --text-main: #Eaeaea;
            --text-muted: #888;
            --accent-gold: #D4AF37; 
            --thread-color: rgba(255, 255, 255, 0.05);
            
            /* Dimens√µes Desktop */
            --slot-std-width: 450px;
            --slot-std-height: 300px;
            
            /* Curvas de Anima√ß√£o - "Luxo Din√¢mico" */
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-touch: cubic-bezier(0.25, 1, 0.5, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            padding-bottom: 5rem;
            position: relative;
        }

        /* === SISTEMA DE ENERGIA === */
        .energy-system {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }

        .thread-vertical {
            position: absolute; left: 50%; top: 0; height: 100%; width: 1px;
            background: linear-gradient(to bottom, transparent, var(--thread-color) 10%, var(--thread-color) 90%, transparent);
            transform: translateX(-50%); opacity: 0.5;
        }

        .pulse-vertical {
            position: absolute; left: 50%; top: 20vh; width: 2px; height: 150px;
            background: linear-gradient(to bottom, transparent, #fff, var(--accent-gold), transparent);
            transform: translateX(-50%) translateY(-200px);
            opacity: 0; box-shadow: 0 0 25px var(--accent-gold); z-index: 1;
        }

        .shockwave-line {
            position: absolute; left: 50%; transform: translateX(-50%); width: 0%; height: 1px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 90%);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5); opacity: 0;
            transition: width 0.8s var(--ease-out-expo), opacity 0.5s ease;
        }
        .sw-1 { top: 110vh; } 
        .sw-2 { top: 190vh; } 

        /* === TIPOGRAFIA === */
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; font-weight: 400; letter-spacing: 0.02em; }
        .section-title { font-size: clamp(2rem, 4vw, 3rem); color: var(--text-main); text-align: center; }
        .meta-data { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.25em; margin-top: 0.8rem; }
        
        .collection-link { 
            color: var(--text-muted); text-decoration: none; font-size: 0.75rem; 
            letter-spacing: 0.15em; transition: 0.4s; position: relative; padding-bottom: 5px;
        }
        .collection-link::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0%; height: 1px; 
            background: var(--accent-gold); transition: width 0.4s;
        }
        .collection-link:hover { color: #fff; }
        .collection-link:hover::after { width: 100%; }

        /* === HEADER === */
        .logo-section {
            height: 18vh; display: flex; justify-content: center; align-items: flex-end; padding-bottom: 2rem; position: relative; z-index: 20;
        }
        .brand-logo { width: 90px; opacity: 0.3; transition: all 0.6s var(--ease-out-expo); cursor: pointer; filter: grayscale(1); }
        .brand-logo:hover, .brand-logo.active { opacity: 1; filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.5)); transform: scale(1.1); }

        /* === HERO CAROUSEL === */
        .hero-section {
            min-height: 75vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            position: relative; z-index: 10; margin-bottom: 4rem;
        }

        .hero-track-container {
            width: 100%; height: 50vh; display: flex; justify-content: center; align-items: center;
            position: relative; perspective: 1200px; touch-action: pan-y; /* Permite scroll vertical, bloqueia horizontal nativo */
        }
        
        .hero-info-wrapper {
            margin-top: 2rem; text-align: center; height: 100px; padding: 0 1rem;
            opacity: 0; transform: translateY(20px); transition: 0.8s var(--ease-out-expo);
        }
        .hero-info-wrapper.visible { opacity: 1; transform: translateY(0); }
        .hero-title { 
            font-size: clamp(2.5rem, 8vw, 4.5rem); /* Fonte Responsiva Din√¢mica */
            text-shadow: 0 30px 60px rgba(0,0,0,0.8); line-height: 1.1; 
        }

        /* === CARROSSEL CORE === */
        .carousel-track {
            position: relative; width: 100%; max-width: 100vw; height: var(--slot-std-height);
            display: flex; justify-content: center; align-items: center; margin-top: 2rem;
            touch-action: pan-y;
        }

        .slot {
            position: absolute; border-radius: 4px; overflow: hidden; background: #080808;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); cursor: pointer;
            transition: all 0.8s var(--ease-out-expo);
            will-change: transform, opacity; /* Otimiza√ß√£o de GPU */
        }
        
        .slot img, .slot video { width: 100%; height: 100%; object-fit: cover; }

        /* ESTADOS */
        .slot.center { z-index: 10; opacity: 1; filter: grayscale(0); box-shadow: 0 25px 60px rgba(0,0,0,0.9); transform: translateX(0) scale(1); }
        
        .slot.left {
            z-index: 5; width: var(--slot-std-width) !important; height: var(--slot-std-height) !important;
            transform: translateX(-100%) scale(0.85); opacity: 0.2; filter: grayscale(1);
        }
        .slot.right {
            z-index: 5; width: var(--slot-std-width) !important; height: var(--slot-std-height) !important;
            transform: translateX(100%) scale(0.85); opacity: 0.2; filter: grayscale(1);
        }
        .slot.hidden { z-index: 0; opacity: 0; transform: scale(0); pointer-events: none; }

        .slot.left:hover, .slot.right:hover { opacity: 0.5; transform: translateX(-100%) scale(0.88); }
        .slot.right:hover { transform: translateX(100%) scale(0.88); }

        /* === SMART RATIO (DESKTOP) === */
        .hero-track-container .slot.center { width: 650px; height: 100%; }
        .hero-track-container .slot.left { transform: translateX(-85%) scale(0.8); }
        .hero-track-container .slot.right { transform: translateX(85%) scale(0.8); }

        #acervo-track .slot.center { width: var(--slot-std-width); height: 100%; }
        
        /* Video Desktop */
        #memorias-track .slot.center.v-landscape { width: 600px; height: 100%; }
        #memorias-track .slot.center.v-portrait { width: 280px; height: 110%; }
        /* CORRE√á√ÉO IMPORTANTE: Object Fit Contain para n√£o cortar v√≠deos verticais */
        #memorias-track .slot.center.v-portrait video { object-fit: contain; background: #000; }

        /* === INFO LAYERS === */
        .slot-info-layer {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(4px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: 0.4s ease; padding: 1rem; text-align: center;
        }
        .slot.center:hover .slot-info-layer.video-hint { opacity: 1; }
        /* A classe .active-mobile simula o hover no toque */
        .slot.center.show-info .slot-info-layer, 
        .slot.center.active-mobile .slot-info-layer { opacity: 1; pointer-events: auto; }

        /* === SE√á√ïES === */
        .section-wrapper { 
            position: relative; z-index: 10; padding: 4rem 0; width: 100%; 
            display: flex; flex-direction: column; align-items: center; 
        }
        .section-header-flex {
            width: 85%; max-width: 1200px; display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        .section-header-flex.center { justify-content: center; text-align: center; border-bottom: none; }

        /* === MODAL HERO (RESPONSIVO TOTAL) === */
        .hero-modal {
            position: fixed; inset: 0; background: #050505; z-index: 1000;
            display: grid; grid-template-columns: 1.5fr 1fr;
            opacity: 0; visibility: hidden; transition: 0.6s var(--ease-out-expo);
        }
        .hero-modal.active { opacity: 1; visibility: visible; }
        
        .hero-modal-img-box {
            width: 100%; height: 100%; background: #000; display: flex; align-items: center; justify-content: center;
        }
        .hero-modal-img-box img { max-width: 100%; max-height: 100%; object-fit: contain; }
        
        .hero-modal-content { 
            padding: 4rem; display: flex; flex-direction: column; justify-content: center;
            border-left: 1px solid rgba(255,255,255,0.05); overflow-y: auto;
        }
        
        .close-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #fff; 
            padding: 1rem 2rem; cursor: pointer; margin-top: 2rem; align-self: flex-start;
            transition: 0.3s;
        }
        .close-btn:hover { border-color: var(--accent-gold); color: var(--accent-gold); }

        /* === FOOTER === */
        footer {
            text-align: center; padding: 5rem 0; opacity: 0.4; 
            font-size: 0.7rem; letter-spacing: 0.3em;
            padding-bottom: calc(5rem + env(safe-area-inset-bottom)); /* iPhone X fix */
        }

        /* === MOBILE OTIMIZADO (O CORA√á√ÉO DA SOLU√á√ÉO) === */
        @media (max-width: 768px) {
            :root {
                --slot-std-width: 75vw; /* Largura fluida baseada na tela */
                --slot-std-height: 250px;
            }
            
            .hero-section { min-height: 65vh; margin-bottom: 2rem; }
            .hero-track-container { height: 40vh; }
            .section-wrapper { padding: 3rem 0; }
            
            /* HERO Mobile Layout */
            .hero-track-container .slot.center { width: 85vw; height: 100%; }
            /* Laterais vis√≠veis minimamente para indicar swipe */
            .hero-track-container .slot.left { transform: translateX(-15%) scale(0.9) translateZ(-50px); opacity: 0; pointer-events: none; }
            .hero-track-container .slot.right { transform: translateX(15%) scale(0.9) translateZ(-50px); opacity: 0; pointer-events: none; }

            /* Acervo Mobile */
            #acervo-track .slot.center { width: 80vw; }
            .slot.left, .slot.right { opacity: 0; pointer-events: none; } /* Limpa a vis√£o lateral no mobile */

            /* Videos Smart Ratio Mobile - C√ÅLCULO PRECISO */
            /* Landscape: ocupa quase toda a largura */
            #memorias-track .slot.center.v-landscape { width: 90vw; height: 220px; }
            /* Portrait: ocupa menos largura para n√£o ficar gigante verticalmente */
            #memorias-track .slot.center.v-portrait { width: 70vw; height: 350px; }

            /* Header Flex Stack */
            .section-header-flex { flex-direction: column; gap: 1.5rem; align-items: center; text-align: center; }
            
            /* MODAL MOBILE */
            .hero-modal { 
                grid-template-columns: 1fr; 
                grid-template-rows: 40% 60%; /* Imagem em cima, texto embaixo */
                height: 100vh; height: 100dvh; /* Dynamic Viewport Height */
            }
            .hero-modal-img-box { padding: 1rem; background: #050505; }
            .hero-modal-content { 
                padding: 2rem; border-left: none; border-top: 1px solid #222; 
                justify-content: flex-start; /* Permite scroll do conte√∫do */
            }
            .hero-modal h2 { font-size: 2rem !important; }

            /* UX Improvements */
            .slot-info-layer span { padding: 10px 20px; font-weight: 500; background: rgba(0,0,0,0.5); }
        }

    </style>
</head>
<body>

    <div class="energy-system">
        <div class="thread-vertical"></div>
        <div class="shockwave-line sw-1" id="sw-1"></div>
        <div class="shockwave-line sw-2" id="sw-2"></div>
        <div class="pulse-vertical" id="main-pulse"></div>
    </div>

    <header class="logo-section">
        <img src="logo.png" alt="Gennoz" class="brand-logo" id="logo-trigger">
    </header>

    <section class="hero-section" id="section-hero">
        <div class="hero-track-container" id="hero-track"></div>
        
        <div class="hero-info-wrapper" id="hero-text-box">
            <h1 class="hero-title serif" id="hero-title-el">Carregando...</h1>
            <p class="meta-data" id="hero-meta-el">...</p>
        </div>
    </section>

    <div class="hero-modal" id="hero-modal">
        <div class="hero-modal-img-box">
            <img src="" id="hero-modal-img">
        </div>
        <div class="hero-modal-content">
            <p class="meta-data" style="color: var(--accent-gold); margin-bottom: 0.5rem;">Arquivo Detalhado</p>
            <h2 class="serif" id="hero-modal-title" style="font-size: 3rem; margin-bottom: 1.5rem; color: #fff; line-height: 1.1;">T√≠tulo</h2>
            <p style="color: #bbb; line-height: 1.6; font-size: 1rem; margin-bottom: 2rem;">
                Imers√£o total na obra selecionada. Este espa√ßo isolado permite a contempla√ß√£o dos detalhes sem distra√ß√µes. A luz, a sombra e a composi√ß√£o s√£o os protagonistas aqui.
            </p>
            <button onclick="toggleHeroModal(false)" class="close-btn">FECHAR VISUALIZA√á√ÉO</button>
        </div>
    </div>

    <section class="section-wrapper" id="section-acervo">
        <div class="section-header-flex">
            <div>
                <h2 class="serif section-title">Acervo</h2>
                <p class="meta-data">Recentes</p>
            </div>
            <a href="colecoes.html" class="collection-link">EXPLORAR TODAS</a>
        </div>
        
        <div class="carousel-track" id="acervo-track"></div>
    </section>

    <section class="section-wrapper" id="section-memorias">
        <div class="section-header-flex center">
            <div>
                <h2 class="serif section-title">Mem√≥rias</h2>
                <p class="meta-data">Fragmentos Audiovisuais</p>
            </div>
        </div>
        
        <div class="carousel-track" id="memorias-track"></div>
    </section>

    <footer>
        <div>GENNOZ ¬© 2025 ‚Ä¢ PERNAMBUCO</div>
    </footer>

    <script>
        // === PARSER AUTOM√ÅTICO DE METADADOS ===
        // Isso permite que voc√™ apenas jogue o arquivo com o nome certo e ele cria os dados
        function parseFilename(filename, type) {
            const nameWithoutExt = filename.split('.').slice(0, -1).join('.');
            const parts = nameWithoutExt.split('-');

            let title = parts[0] || "Sem T√≠tulo";
            let meta = "";
            let link = (type === 'acervo') ? "obra.html" : "...";
            
            if (parts.length >= 3) {
                meta = `${parts[1]} ‚Ä¢ ${parts[2].toUpperCase()}`;
            } else if (parts.length === 2) {
                meta = parts[1].toUpperCase();
            } else {
                meta = "GENNOZ ‚Ä¢ ACERVO";
            }

            return { 
                src: filename, 
                title: title.replace(/_/g, ' '), 
                meta: meta, 
                link: link 
            };
        }

        // === BASE DE DADOS (EDITE AQUI) ===
        // Formato Imagens: "Titulo-Ano-Local.jpg"
        const dataHero = [
            parseFilename("familia01.jpg", 'hero'),
            parseFilename("familia02.jpg", 'hero'),
            parseFilename("familia03-Serrambi.jpg", 'hero')
        ];

        const dataAcervo = [
            parseFilename("imagem01.jpg", 'acervo'),
            parseFilename("imagem02.jpg", 'acervo'),
            parseFilename("imagem03.jpg", 'acervo'),
            parseFilename("imagem04.jpg", 'acervo'),
            parseFilename("imagem05.jpg", 'acervo'),
            parseFilename("imagem06.jpg", 'acervo')
        ];

        // Para v√≠deos, mantenha a orientation manual
        const dataMemorias = [
            { ...parseFilename("video01.mp4", 'memo'), orientation: "portrait" },
            { ...parseFilename("video02.mp4", 'memo'), orientation: "portrait" },
            { ...parseFilename("video03.mp4", 'memo'), orientation: "landscape" },
            { ...parseFilename("video04.mp4", 'memo'), orientation: "landscape" },
            { ...parseFilename("video05.mp4", 'memo'), orientation: "portrait" }
        ];

        let state = { hero: 0, acervo: 0, memo: 0 };


        // === ENGINE AVAN√áADA ===
        function renderCarousel(trackId, data, currentIdx, type, stateKey) {
            const container = document.getElementById(trackId);
            container.innerHTML = '';

            const prevIdx = (currentIdx - 1 + data.length) % data.length;
            const nextIdx = (currentIdx + 1) % data.length;

            data.forEach((item, i) => {
                const slot = document.createElement('div');
                let classes = 'slot';
                let isCenter = false;

                if (i === currentIdx) { 
                    classes += ' center'; isCenter = true;
                    if (type === 'vid') classes += item.orientation === 'portrait' ? ' v-portrait' : ' v-landscape';
                } 
                else if (i === prevIdx) classes += ' left'; 
                else if (i === nextIdx) classes += ' right'; 
                else classes += ' hidden';

                slot.className = classes;

                // CONTE√öDO
                if (type === 'vid') {
                    slot.innerHTML = `
                        <video src="${item.src}" loop playsinline muted ${isCenter ? 'autoplay' : ''}></video>
                        <div class="slot-info-layer video-hint">
                            <span style="font-size: 2rem; color: #fff;">${isCenter ? 'üîä' : '‚ñ∂'}</span>
                        </div>
                    `;
                } else {
                    slot.innerHTML = `<img src="${item.src}">`;
                    if (type !== 'hero') {
                        slot.innerHTML += `
                            <div class="slot-info-layer">
                                <h3 class="serif" style="color:#fff; font-size:1.5rem; margin-bottom:0.5rem;">${item.title}</h3>
                                <p class="meta-data" style="margin-bottom:1.5rem;">${item.meta}</p>
                                <span style="border:1px solid rgba(255,255,255,0.5); padding:8px 20px; font-size:0.7rem; letter-spacing: 0.1em; background: rgba(0,0,0,0.3);">DETALHES</span>
                            </div>
                        `;
                    }
                }

                // INTERA√á√ÉO INTELIGENTE (Clique & Mobile Tap)
                slot.onclick = (e) => {
                    // Prevenir comportamento padr√£o se for mobile double-tap logic
                    if (slot.classList.contains('left')) updateState(stateKey, -1);
                    else if (slot.classList.contains('right')) updateState(stateKey, 1);
                    else if (slot.classList.contains('center')) handleCenterClick(slot, item, type);
                };

                // Video Hover (Desktop Only)
                if (type === 'vid' && !isCenter && window.matchMedia("(hover: hover)").matches) {
                    slot.onmouseenter = () => { slot.querySelector('video').play(); };
                    slot.onmouseleave = () => { const v = slot.querySelector('video'); v.pause(); v.currentTime = 0; };
                }

                container.appendChild(slot);
            });
            
            // Reaplica os listeners de Swipe ap√≥s renderizar
            setupSwipe(container, stateKey);
        }

        function updateState(key, dir) {
            if (key === 'hero') {
                state.hero = (state.hero + dir + dataHero.length) % dataHero.length;
                renderHeroText();
            }
            if (key === 'acervo') state.acervo = (state.acervo + dir + dataAcervo.length) % dataAcervo.length;
            if (key === 'memo') state.memo = (state.memo + dir + dataMemorias.length) % dataMemorias.length;
            
            renderAll();
        }

        // L√ìGICA DE INTERA√á√ÉO H√çBRIDA (Desktop vs Mobile)
        function handleCenterClick(slot, item, type) {
            const isMobile = window.matchMedia("(hover: none)").matches;

            // Se for mobile e a info layer ainda N√ÉO estiver vis√≠vel, mostra ela primeiro
            if (isMobile && type !== 'hero' && !slot.classList.contains('active-mobile') && type !== 'vid') {
                // Remove active de outros slots
                document.querySelectorAll('.slot.active-mobile').forEach(el => el.classList.remove('active-mobile'));
                slot.classList.add('active-mobile');
                return; // Para aqui, n√£o abre o link ainda
            }

            // A√ß√£o Real (Segundo toque ou Clique Desktop)
            if (type === 'hero') {
                document.getElementById('hero-modal-img').src = item.src;
                document.getElementById('hero-modal-title').innerText = item.title;
                toggleHeroModal(true);
            } else if (type === 'img') {
                window.location.href = item.link;
            } else if (type === 'vid') {
                const v = slot.querySelector('video');
                v.muted = !v.muted;
                slot.querySelector('span').innerText = v.muted ? 'üîä' : 'üîà';
            }
        }

        function renderHeroText() {
            const box = document.getElementById('hero-text-box');
            box.classList.remove('visible');
            setTimeout(() => {
                document.getElementById('hero-title-el').innerText = dataHero[state.hero].title;
                document.getElementById('hero-meta-el').innerText = dataHero[state.hero].meta;
                box.classList.add('visible');
            }, 300);
        }

        function renderAll() {
            // Renderiza apenas se os elementos existirem (seguran√ßa)
            if(document.getElementById('hero-track')) renderCarousel('hero-track', dataHero, state.hero, 'hero', 'hero');
            if(document.getElementById('acervo-track')) renderCarousel('acervo-track', dataAcervo, state.acervo, 'img', 'acervo');
            if(document.getElementById('memorias-track')) renderCarousel('memorias-track', dataMemorias, state.memo, 'vid', 'memo');
        }

        function toggleHeroModal(show) {
            const m = document.getElementById('hero-modal');
            m.classList.toggle('active', show);
            // Bloqueia scroll do body quando modal est√° aberto
            document.body.style.overflow = show ? 'hidden' : '';
        }

        // === ENGINE DE TOQUE (SWIPE) ===
        function setupSwipe(element, stateKey) {
            let touchStartX = 0;
            let touchEndX = 0;

            element.ontouchstart = (e) => {
                touchStartX = e.changedTouches[0].screenX;
            };

            element.ontouchend = (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            };

            function handleSwipe() {
                const threshold = 50; // M√≠nimo de pixels para considerar swipe
                if (touchEndX < touchStartX - threshold) {
                    updateState(stateKey, 1); // Swipe Left -> Next
                }
                if (touchEndX > touchStartX + threshold) {
                    updateState(stateKey, -1); // Swipe Right -> Prev
                }
            }
        }

        // === ENERGIA & ANIMA√á√ïES ===
        const logo = document.getElementById('logo-trigger');
        const pulse = document.getElementById('main-pulse');
        const sw1 = document.getElementById('sw-1');
        const sw2 = document.getElementById('sw-2');

        if(logo) {
            logo.addEventListener('click', () => {
                logo.classList.add('active');
                setTimeout(() => logo.classList.remove('active'), 1000);

                pulse.style.transition = 'none';
                pulse.style.transform = 'translateX(-50%) translateY(-200px)';
                pulse.style.opacity = '1';
                void pulse.offsetWidth;

                pulse.style.transition = 'transform 2s linear, opacity 2s ease-in';
                pulse.style.transform = 'translateX(-50%) translateY(250vh)';

                setTimeout(() => triggerShockwave(sw1), 600);
                setTimeout(() => triggerShockwave(sw2), 1200);

                setTimeout(() => { pulse.style.opacity = '0'; }, 2000);
            });
        }

        function triggerShockwave(el) {
            if(!el) return;
            el.style.opacity = '1';
            el.style.width = '100%';
            setTimeout(() => { el.style.opacity = '0'; }, 300);
            setTimeout(() => { el.style.width = '0%'; }, 800);
        }

        // Init
        window.onload = () => {
            renderAll();
            renderHeroText();
        };

    </script>
</body>
</html>
