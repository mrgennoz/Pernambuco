<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gennoz | Acervo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #050505;
            --text-main: #Eaeaea;
            --text-muted: #888;
            --accent-gold: #D4AF37; 
            --accent-gold-dim: rgba(212, 175, 55, 0.3);
            --thread-color: rgba(255, 255, 255, 0.05);
            
            /* Curvas de Anima√ß√£o - "Cinematic Feel" */
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-fluid: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            position: relative;
            transition: background 1s ease;
        }

        /* === ESTADO DE ENERGIA GLOBAL (SURGE) === */
        body.surge-active {
            background-color: #0a0a0a; /* Leve clareamento no fundo */
        }
        body.surge-active .slot {
            box-shadow: 0 0 30px var(--accent-gold-dim);
            border-color: rgba(212, 175, 55, 0.2);
        }
        body.surge-active .meta-data {
            color: var(--accent-gold);
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        /* === SISTEMA DE FUNDO === */
        .energy-system {
            position: absolute; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; height: 100%;
        }
        .thread-vertical {
            position: absolute; left: 50%; top: 0; height: 100%; width: 1px;
            background: linear-gradient(to bottom, transparent, var(--thread-color) 20%, var(--thread-color) 80%, transparent);
            transform: translateX(-50%); opacity: 0.5;
        }

        /* === TIPOGRAFIA === */
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; font-weight: 400; letter-spacing: 0.01em; }
        .meta-data { 
            font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.2em; 
            transition: color 0.5s ease;
        }
        
        /* === HEADER & LOGO === */
        .logo-section {
            height: 15vh; display: flex; justify-content: center; align-items: flex-end; 
            padding-bottom: 1.5rem; position: relative; z-index: 20;
        }
        .brand-logo { 
            width: 85px; opacity: 0.6; cursor: pointer; filter: grayscale(1) brightness(0.8);
            animation: breathe-logo 4s infinite ease-in-out;
            transition: transform 0.3s var(--ease-out-expo), filter 0.3s;
        }
        /* Logo State: Constant Breathing */
        @keyframes breathe-logo {
            0%, 100% { opacity: 0.4; transform: scale(1); filter: grayscale(1) drop-shadow(0 0 0 transparent); }
            50% { opacity: 0.7; transform: scale(1.02); filter: grayscale(1) drop-shadow(0 0 10px rgba(255,255,255,0.1)); }
        }
        .brand-logo:active, .brand-logo.active { 
            animation: none; opacity: 1; filter: drop-shadow(0 0 30px var(--accent-gold)) grayscale(0); transform: scale(1.1);
        }

        /* === HERO SECTION === */
        .hero-section {
            height: 80vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            position: relative; z-index: 10; margin-bottom: 2rem;
        }
        .hero-track-container {
            width: 100%; height: 60%; display: flex; justify-content: center; align-items: center;
            position: relative; perspective: 1000px; touch-action: pan-y;
        }
        .hero-info-wrapper {
            margin-top: 1.5rem; text-align: center; height: 100px; padding: 0 1rem;
            opacity: 0; transform: translateY(15px); transition: 0.6s var(--ease-out-expo);
        }
        .hero-info-wrapper.visible { opacity: 1; transform: translateY(0); }
        .hero-title { font-size: clamp(2.5rem, 6vw, 4.5rem); line-height: 1; margin-bottom: 0.5rem; }

        /* === CAROUSEL STRUCTURE === */
        .carousel-track {
            position: relative; width: 100%; height: 350px;
            display: flex; justify-content: center; align-items: center; margin-top: 1rem;
            touch-action: pan-y;
        }

        .slot {
            position: absolute; border-radius: 2px; overflow: hidden; background: #111;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); cursor: pointer;
            transition: all 0.7s var(--ease-out-expo);
            will-change: transform, opacity, width;
            border: 1px solid transparent; /* Prepare for surge effect */
        }
        
        /* CORRE√á√ÉO HERO: Preenchimento total sem bordas pretas */
        .slot img, .slot video { 
            width: 100%; height: 100%; object-fit: cover; display: block; 
            transition: transform 1.2s var(--ease-out-expo);
        }

        /* Estados de Posi√ß√£o */
        .slot.center { 
            z-index: 10; opacity: 1; filter: grayscale(0); 
            transform: translateX(0) scale(1); 
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
        }
        .slot.left {
            z-index: 5; width: 300px; height: 200px;
            transform: translateX(-120%) scale(0.85); opacity: 0.3; filter: grayscale(1) brightness(0.5);
        }
        .slot.right {
            z-index: 5; width: 300px; height: 200px;
            transform: translateX(120%) scale(0.85); opacity: 0.3; filter: grayscale(1) brightness(0.5);
        }
        .slot.hidden { opacity: 0; transform: scale(0); pointer-events: none; }

        /* === HERO SIZING === */
        #hero-track .slot.center { width: 600px; height: 100%; }
        
        /* === ACERVO SIZING & INTERACTION === */
        #acervo-track .slot.center { width: 400px; height: 100%; }
        
        /* Efeito de expans√£o no clique (Mobile) ou Hover (Desktop) */
        .slot.expanded img { transform: scale(1.05); filter: brightness(1.1); }
        
        /* INFO REVEAL (Sem escurecer a imagem) */
        .acervo-info-panel {
            position: absolute; bottom: 0; left: 0; width: 100%;
            padding: 2rem 1rem 1rem 1rem;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 60%, transparent 100%);
            transform: translateY(100%); opacity: 0;
            transition: transform 0.5s var(--ease-out-expo), opacity 0.4s ease;
            display: flex; flex-direction: column; align-items: center; text-align: center;
        }
        .slot.expanded .acervo-info-panel { transform: translateY(0); opacity: 1; }

        /* === VIDEO SECTION (MEM√ìRIAS) === */
        #memorias-track .slot.center.v-landscape { width: 550px; height: 100%; }
        #memorias-track .slot.center.v-portrait { width: 300px; height: 110%; }
        
        /* √çcone de Som (Feedback visual limpo) */
        .sound-icon-feedback {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.5);
            font-size: 3rem; color: #fff; opacity: 0; pointer-events: none;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }
        .slot.sound-active .sound-icon-feedback {
            animation: flash-icon 1s forwards;
        }
        @keyframes flash-icon {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }

        /* === INDICADORES DE NAVEGA√á√ÉO === */
        .nav-indicators {
            display: flex; justify-content: center; gap: 8px; margin-top: 1.5rem;
        }
        .nav-dot {
            width: 4px; height: 4px; background: #333; border-radius: 50%;
            transition: all 0.3s;
        }
        .nav-dot.active { width: 20px; background: var(--accent-gold); border-radius: 4px; }

        /* === MODAL HERO (FIXED) === */
        .hero-modal {
            position: fixed; inset: 0; background: rgba(5,5,5,0.98); z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.5s var(--ease-out-expo);
            padding: 2rem;
        }
        .hero-modal.active { opacity: 1; visibility: visible; }
        
        .hero-modal-img-wrapper {
            width: 100%; max-width: 1000px; height: 70vh; 
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 2rem;
        }
        /* Corre√ß√£o: Imagem contida, nunca cortada, respeitando aspect ratio */
        .hero-modal-img-wrapper img {
            max-width: 100%; max-height: 100%; width: auto; height: auto;
            object-fit: contain; box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }
        
        .hero-modal-text { text-align: center; max-width: 500px; animation: slideUp 0.6s 0.2s backwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .close-btn {
            margin-top: 1rem; background: transparent; border: 1px solid rgba(255,255,255,0.3);
            color: #fff; padding: 0.8rem 2rem; font-size: 0.8rem; letter-spacing: 0.2em; cursor: pointer;
        }

        /* === MOBILE OTIMIZADO (ABSOLUTO) === */
        @media (max-width: 768px) {
            .hero-section { height: 65vh; }
            .hero-track-container { height: 70%; perspective: 500px; }
            
            /* HERO: Preenche a tela de forma imponente */
            #hero-track .slot.center { width: 88vw; height: 100%; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
            /* Laterais vis√≠veis para dar "dica" de carrossel */
            #hero-track .slot.left { transform: translateX(-15%) scale(0.9) translateZ(-50px); opacity: 0.5; width: 88vw; height: 100%; }
            #hero-track .slot.right { transform: translateX(15%) scale(0.9) translateZ(-50px); opacity: 0.5; width: 88vw; height: 100%; }

            /* ACERVO */
            #acervo-track { height: 380px; }
            #acervo-track .slot.center { width: 82vw; height: 100%; }
            /* "Peek" effect para mostrar que tem mais */
            #acervo-track .slot.left { transform: translateX(-105%) scale(0.85); opacity: 0.3; display: block; }
            #acervo-track .slot.right { transform: translateX(105%) scale(0.85); opacity: 0.3; display: block; }

            /* VIDEO MOBILE */
            #memorias-track { height: 300px; }
            #memorias-track .slot.center.v-landscape { width: 92vw; height: 220px; }
            #memorias-track .slot.center.v-portrait { width: 70vw; height: 100%; }

            /* Painel de Info Mobile - Texto grande e claro */
            .acervo-info-panel h3 { font-size: 1.8rem; margin-bottom: 0.5rem; }
            .acervo-info-panel .meta-data { font-size: 0.8rem; opacity: 0.9; }

            .hero-modal { padding: 1rem; justify-content: flex-start; padding-top: 3rem; }
            .hero-modal-img-wrapper { height: 50vh; }
        }

    </style>
</head>
<body>

    <div class="energy-system">
        <div class="thread-vertical"></div>
    </div>

    <header class="logo-section">
        <img src="logo.png" alt="Gennoz" class="brand-logo" id="logo-trigger">
    </header>

    <section class="hero-section" id="section-hero">
        <div class="hero-track-container" id="hero-track"></div>
        <div class="nav-indicators" id="hero-indicators"></div>
        
        <div class="hero-info-wrapper" id="hero-text-box">
            <h1 class="hero-title serif" id="hero-title-el">Carregando...</h1>
            <p class="meta-data" id="hero-meta-el">...</p>
        </div>
    </section>

    <div class="hero-modal" id="hero-modal">
        <div class="hero-modal-img-wrapper">
            <img src="" id="hero-modal-img">
        </div>
        <div class="hero-modal-text">
            <h2 class="serif" id="hero-modal-title" style="font-size: 2rem; color: #fff;">T√≠tulo</h2>
            <p class="meta-data" id="hero-modal-meta" style="margin-bottom: 1rem; color: var(--accent-gold);">...</p>
            <button onclick="toggleHeroModal(false)" class="close-btn">FECHAR</button>
        </div>
    </div>

    <section style="padding: 4rem 0;">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 class="serif section-title" style="font-size: 2rem;">Acervo</h2>
            <p class="meta-data">Cole√ß√£o Recente</p>
        </div>
        <div class="carousel-track" id="acervo-track"></div>
        <div class="nav-indicators" id="acervo-indicators"></div>
    </section>

    <section style="padding: 4rem 0;">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 class="serif section-title" style="font-size: 2rem;">Mem√≥rias</h2>
            <p class="meta-data">Fragmentos</p>
        </div>
        <div class="carousel-track" id="memorias-track"></div>
        <div class="nav-indicators" id="memo-indicators"></div>
    </section>

    <footer style="text-align: center; padding: 4rem 0; opacity: 0.4;">
        <p class="meta-data">GENNOZ ¬© 2025 ‚Ä¢ PERNAMBUCO</p>
    </footer>

    <script>
        // === PARSER INTELIGENTE ===
        function parseFilename(filename, type) {
            const clean = filename.split('.').slice(0, -1).join('');
            const parts = clean.split('-');
            const title = parts[0] ? parts[0].replace(/_/g, ' ') : "Sem T√≠tulo";
            let meta = "GENNOZ ‚Ä¢ ACERVO";
            
            if (parts.length >= 3) meta = `${parts[1]} ‚Ä¢ ${parts[2].toUpperCase()}`;
            else if (parts.length === 2) meta = parts[1].toUpperCase();

            return { src: filename, title, meta, link: 'obra.html' };
        }

        // === BASES DE DADOS ===
        const dataHero = [
            parseFilename("Eu e Nuz-2025-Prazeres.jpg", 'hero'),
            parseFilename("Fam√≠lia-2025-Prazeres.jpg", 'hero'),
            parseFilename("Eu, Ela e os Beb√™s-2025-Prazeres.jpg", 'hero')
        ];

        const dataAcervo = [
            parseFilename("Praia de Serrambi-2024-Ipojuca.jpg", 'acervo'),
            parseFilename("Orgulho em Calhetas-2024-Cabo.jpg", 'acervo'),
            parseFilename("Praia de Piedade-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Dia Azul em Prazeres-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Engrenagens do Interior-2023-Carpina.jpg", 'acervo'),
            parseFilename("Caramelos em Serrambi-2024-Ipojuca.jpg", 'acervo'),
            parseFilename("Crias de Prazeres-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Gato em Bras√≠lia Teimosa-2024-Recife.jpg", 'acervo'),
            parseFilename("Vista do Interior-2023-Carpina.jpg", 'acervo'),
            parseFilename("Sotave-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Jaboat√£o Nublado-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Vibe Prazeres-2024-Jaboatao.jpg", 'acervo'),
            parseFilename("Linha F√©rrea em Prazeres-2024-Jaboatao.jpg", 'acervo')
        ];

        // V√≠deos com Orientation Manual Obrigat√≥ria
        const dataMemorias = [
            { ...parseFilename("De Boinha-2023-Jaboatao.mp4", 'memo'), orientation: "portrait" },
            { ...parseFilename("T√∫nel do Tempo-2023-Recife.mp4", 'memo'), orientation: "portrait" },
            { ...parseFilename("Passeio em Recife-2023-Recife.mp4", 'memo'), orientation: "portrait" },
            { ...parseFilename("Aventura em Enseadas-2022-Cabo.mp4", 'memo'), orientation: "landscape" },
            { ...parseFilename("Patins e Itapuama-2022-Cabo.mp4", 'memo'), orientation: "landscape" },
        ];

        let state = { hero: 0, acervo: 0, memo: 0 };

        // === RENDER ENGINE MASTERPIECE ===
        function renderCarousel(trackId, data, currentIdx, type, stateKey, indicatorId) {
            const container = document.getElementById(trackId);
            const indicators = document.getElementById(indicatorId);
            container.innerHTML = '';
            
            // Render Indicators (Dots)
            if(indicators) {
                indicators.innerHTML = data.map((_, i) => 
                    `<div class="nav-dot ${i === currentIdx ? 'active' : ''}"></div>`
                ).join('');
            }

            const prevIdx = (currentIdx - 1 + data.length) % data.length;
            const nextIdx = (currentIdx + 1) % data.length;

            data.forEach((item, i) => {
                // Cria√ß√£o apenas dos itens vis√≠veis (Otimiza√ß√£o)
                // No mobile, queremos ver as bordas dos laterais, ent√£o renderizamos eles
                if (i !== currentIdx && i !== prevIdx && i !== nextIdx) return;

                const slot = document.createElement('div');
                let classes = 'slot';
                let isCenter = false;

                if (i === currentIdx) { 
                    classes += ' center'; isCenter = true; 
                    if(type === 'vid') classes += item.orientation === 'portrait' ? ' v-portrait' : ' v-landscape';
                }
                else if (i === prevIdx) classes += ' left';
                else if (i === nextIdx) classes += ' right';

                slot.className = classes;

                // CONTE√öDO HTML
                if (type === 'vid') {
                    // Sem overlay escuro fixo, apenas v√≠deo limpo
                    slot.innerHTML = `
                        <video src="${item.src}" loop playsinline muted ${isCenter ? 'autoplay' : ''}></video>
                        <div class="sound-icon-feedback">üîä</div>
                    `;
                } else {
                    slot.innerHTML = `<img src="${item.src}">`;
                    if (type !== 'hero') {
                        // Painel de info que desliza de baixo
                        slot.innerHTML += `
                            <div class="acervo-info-panel">
                                <h3 class="serif" style="color:#fff;">${item.title}</h3>
                                <p class="meta-data" style="margin-bottom:1rem; color:#ccc;">${item.meta}</p>
                                <span style="font-size:0.6rem; letter-spacing:0.2em; border-bottom:1px solid #666; padding-bottom:3px;">VER OBRA</span>
                            </div>
                        `;
                    }
                }

                // === EVENTOS DE CLICK INTELIGENTE ===
                slot.onclick = (e) => {
                    // Se clicar nas laterais, navega
                    if (slot.classList.contains('left')) updateState(stateKey, -1);
                    else if (slot.classList.contains('right')) updateState(stateKey, 1);
                    
                    // Se clicar no centro (L√≥gica Principal)
                    else if (slot.classList.contains('center')) {
                        
                        // L√≥gica HERO (Abre Modal)
                        if (type === 'hero') {
                            openHeroModal(item);
                        }
                        
                        // L√≥gica ACERVO (2 Passos: Expandir -> Navegar)
                        else if (type === 'img') {
                            // Verifica se j√° est√° expandido (classe .expanded)
                            if (slot.classList.contains('expanded')) {
                                // Segundo clique: vai para o link
                                window.location.href = item.link;
                            } else {
                                // Primeiro clique: expande e mostra info
                                // Remove expanded de outros primeiro
                                document.querySelectorAll('#' + trackId + ' .slot').forEach(s => s.classList.remove('expanded'));
                                slot.classList.add('expanded');
                            }
                        }
                        
                        // L√≥gica VIDEO (Mute Toggle com Feedback Visual)
                        else if (type === 'vid') {
                            const vid = slot.querySelector('video');
                            vid.muted = !vid.muted;
                            // Feedback Visual
                            const icon = slot.querySelector('.sound-icon-feedback');
                            icon.innerText = vid.muted ? 'üîá' : 'üîä';
                            
                            // Reinicia anima√ß√£o CSS
                            slot.classList.remove('sound-active');
                            void slot.offsetWidth; // Force reflow
                            slot.classList.add('sound-active');
                        }
                    }
                };

                container.appendChild(slot);
            });

            // Re-bind Swipe
            setupSwipe(container, stateKey);
        }

        function updateState(key, dir) {
            if (key === 'hero') {
                state.hero = (state.hero + dir + dataHero.length) % dataHero.length;
                renderHeroText();
            }
            if (key === 'acervo') state.acervo = (state.acervo + dir + dataAcervo.length) % dataAcervo.length;
            if (key === 'memo') state.memo = (state.memo + dir + dataMemorias.length) % dataMemorias.length;
            
            renderAll();
        }

        // === INTERFACE HELPERS ===
        function renderHeroText() {
            const box = document.getElementById('hero-text-box');
            box.classList.remove('visible');
            setTimeout(() => {
                document.getElementById('hero-title-el').innerText = dataHero[state.hero].title;
                document.getElementById('hero-meta-el').innerText = dataHero[state.hero].meta;
                box.classList.add('visible');
            }, 300);
        }

        function openHeroModal(item) {
            document.getElementById('hero-modal-img').src = item.src;
            document.getElementById('hero-modal-title').innerText = item.title;
            document.getElementById('hero-modal-meta').innerText = item.meta;
            toggleHeroModal(true);
        }

        function toggleHeroModal(show) {
            const m = document.getElementById('hero-modal');
            m.classList.toggle('active', show);
            document.body.style.overflow = show ? 'hidden' : ''; // Trava scroll da p√°gina
        }

        function renderAll() {
            if(document.getElementById('hero-track')) renderCarousel('hero-track', dataHero, state.hero, 'hero', 'hero', 'hero-indicators');
            if(document.getElementById('acervo-track')) renderCarousel('acervo-track', dataAcervo, state.acervo, 'img', 'acervo', 'acervo-indicators');
            if(document.getElementById('memorias-track')) renderCarousel('memorias-track', dataMemorias, state.memo, 'vid', 'memo', 'memo-indicators');
        }

        // === GESTURE CONTROL (SWIPE) ===
        function setupSwipe(element, stateKey) {
            let touchStartX = 0;
            element.ontouchstart = (e) => touchStartX = e.changedTouches[0].screenX;
            element.ontouchend = (e) => {
                const touchEndX = e.changedTouches[0].screenX;
                if (touchEndX < touchStartX - 40) updateState(stateKey, 1);
                if (touchEndX > touchStartX + 40) updateState(stateKey, -1);
            };
        }

        // === GLOBAL ENERGY EVENT ===
        const logo = document.getElementById('logo-trigger');
        if(logo) {
            logo.addEventListener('click', () => {
                // Ativa estado global no Body
                document.body.classList.add('surge-active');
                logo.classList.add('active');
                
                // Remove ap√≥s 2s
                setTimeout(() => {
                    document.body.classList.remove('surge-active');
                    logo.classList.remove('active');
                }, 2000);
            });
        }

        // Init
        window.onload = () => {
            renderAll();
            renderHeroText();
        };

    </script>
</body>
</html>
