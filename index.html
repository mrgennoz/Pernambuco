<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>GENNOZ — Acervo</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Manrope:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
    --bg:#050505;
    --fg:#eaeaea;
    --muted:#777;
    --gold:#d4af37;
    --ease:cubic-bezier(.19,1,.22,1);
}

*{margin:0;padding:0;box-sizing:border-box}

body{
    background:var(--bg);
    color:var(--fg);
    font-family:Manrope,sans-serif;
    overflow:hidden;
}

/* Noise */
body::after{
    content:"";
    position:fixed;inset:0;
    pointer-events:none;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    opacity:.035;
    z-index:999;
}

/* Header */
header{
    height:14vh;
    display:flex;
    justify-content:center;
    align-items:flex-end;
}

.logo{
    width:70px;height:70px;
    border:1px solid var(--gold);
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    transition:.6s var(--ease);
}
.logo.active{
    box-shadow:0 0 30px rgba(212,175,55,.4);
}

/* Acervo */
main{
    height:86vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.track{
    position:relative;
    width:100%;
    max-width:900px;
    height:60vh;
    perspective:1000px;
}

.item{
    position:absolute;
    inset:0;
    margin:auto;
    width:70%;
    height:100%;
    background:#111;
    opacity:0;
    transform:scale(.9);
    transition:.8s var(--ease);
    box-shadow:0 30px 80px rgba(0,0,0,.8);
    cursor:pointer;
}

.item.active{
    opacity:1;
    transform:scale(1);
    z-index:3;
}

.item.left,
.item.right{
    opacity:.25;
    z-index:1;
}

.item.left{
    transform:translateX(-60%) scale(.85) rotateY(6deg);
}
.item.right{
    transform:translateX(60%) scale(.85) rotateY(-6deg);
}

.item img,
.item video{
    width:100%;
    height:100%;
    object-fit:cover;
}

/* Registro */
.info{
    position:absolute;
    bottom:0;
    width:100%;
    padding:2rem 1rem;
    background:linear-gradient(to top, rgba(0,0,0,.95), transparent);
    text-align:center;
    opacity:0;
    transition:.6s var(--ease);
}

.item.active .info{
    opacity:1;
}

.info h3{
    font-family:Playfair Display,serif;
    font-size:1.4rem;
}
.info p{
    font-size:.7rem;
    letter-spacing:.2em;
    color:var(--gold);
    margin-top:.3rem;
}

/* Estado latente */
body.latent main{
    opacity:.1;
    pointer-events:none;
}

/* Mobile */
@media(max-width:768px){
    .item{width:90%}
    .item.left{transform:translateX(-20%) scale(.9)}
    .item.right{transform:translateX(20%) scale(.9)}
}
</style>
</head>

<body class="latent">

<header>
    <div class="logo" id="toggle"></div>
</header>

<main>
    <div class="track" id="track"></div>
</main>

<script>
const DATA=[
 {src:"Praia_de_Piedade-2024-Jaboatao.jpg",type:"img"},
 {src:"Orgulho_em_Calhetas-2024-Cabo.jpg",type:"img"},
 {src:"Patins_e_Itapuama-2022-Cabo.mp4",type:"vid"}
];

let index=0;
const track=document.getElementById("track");

function parse(name){
    const n=name.split(".")[0].split("-");
    return{
        title:n[0].replace(/_/g," "),
        meta:`${n[1]} • ${n[2].toUpperCase()}`
    }
}

function render(){
    track.innerHTML="";
    const prev=(index-1+DATA.length)%DATA.length;
    const next=(index+1)%DATA.length;

    [prev,index,next].forEach(i=>{
        const d=DATA[i];
        const info=parse(d.src);
        const el=document.createElement("div");
        el.className="item "+(i===index?"active":i===prev?"left":"right");

        el.innerHTML=
        d.type==="vid"
        ?`<video src="${d.src}" playsinline muted></video>`
        :`<img src="${d.src}">`;

        el.innerHTML+=`
        <div class="info">
            <h3>${info.title}</h3>
            <p>${info.meta}</p>
        </div>`;

        el.onclick=()=>{
            if(i===prev) index=prev;
            else if(i===next) index=next;
            else if(d.type==="vid"){
                const v=el.querySelector("video");
                v.muted=!v.muted;
                v.play();
            }
            render();
        };

        track.appendChild(el);
    });
}

render();

/* Estado do acervo */
const toggle=document.getElementById("toggle");
toggle.onclick=()=>{
    document.body.classList.toggle("latent");
    toggle.classList.toggle("active");
};
</script>

</body>
</html>
