<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gennoz | Acervo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Manrope:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Palette Premium */
            --bg-deep: #050505;
            --bg-surface: #0a0a0a;
            --text-primary: #Eaeaea;
            --text-secondary: #888;
            --accent-gold: #D4AF37; 
            --accent-gold-glow: rgba(212, 175, 55, 0.4);
            
            /* Physics (Motion Design) */
            --ease-elastic: cubic-bezier(0.19, 1, 0.22, 1); /* Apple-like feel */
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Dimensions */
            --slot-radius: 4px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            background-color: var(--bg-deep);
            color: var(--text-primary);
            font-family: 'Manrope', sans-serif; /* Fonte mais moderna para UI */
            overflow-x: hidden;
            opacity: 0; animation: fadeInPage 1.5s var(--ease-smooth) forwards;
        }

        @keyframes fadeInPage { to { opacity: 1; } }

        /* === GLOBAL SURGE EFFECT (A Onda de Choque) === */
        .surge-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, var(--accent-gold-glow) 0%, transparent 70%);
            opacity: 0; pointer-events: none; z-index: 9999;
            transition: opacity 0.8s ease;
        }
        .surge-active .surge-overlay { opacity: 0.2; animation: pulseScreen 2s infinite; }

        @keyframes pulseScreen {
            0% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.05); opacity: 0.2; }
            100% { transform: scale(1); opacity: 0.1; }
        }

        /* === TYPOGRAPHY === */
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; font-weight: 400; letter-spacing: -0.02em; }
        .meta { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.15em; font-weight: 600; }

        /* === HEADER & LOGO (ENGINEERED MOTION) === */
        .header {
            height: 14vh; display: flex; justify-content: center; align-items: flex-end;
            padding-bottom: 1rem; position: relative; z-index: 50;
        }
        
        .logo-container {
            position: relative; width: 80px; height: 80px;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
        }

        /* O "Coração" da Logo - Pulso Constante */
        .logo-pulse {
            position: absolute; width: 100%; height: 100%; border-radius: 50%;
            border: 1px solid var(--accent-gold);
            opacity: 0; transform: scale(0.8);
            animation: ripple-idle 3s infinite var(--ease-smooth);
        }
        @keyframes ripple-idle {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 0.15; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        .brand-logo { 
            width: 60px; filter: grayscale(1) brightness(0.9); transition: all 0.5s var(--ease-elastic);
            position: relative; z-index: 2;
        }
        
        /* Estado Ativo (Clique) */
        .logo-container.active .brand-logo { 
            filter: grayscale(0) drop-shadow(0 0 15px var(--accent-gold)); transform: scale(1.1); 
        }
        .logo-container.active .logo-pulse {
            border-width: 2px; animation: ripple-burst 0.8s var(--ease-elastic);
        }
        @keyframes ripple-burst {
            0% { transform: scale(1); opacity: 0.8; border-color: #fff; }
            100% { transform: scale(3); opacity: 0; border-color: var(--accent-gold); }
        }

        /* === CAROUSEL ENGINE (CORE) === */
        .section-wrapper { padding: 3rem 0; position: relative; }
        
        .track-container {
            width: 100%; height: 400px; /* Altura Desktop Padrão */
            position: relative; display: flex; justify-content: center; align-items: center;
            perspective: 1000px; overflow: visible;
        }

        .slot {
            position: absolute; border-radius: var(--slot-radius);
            background: #111; overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            transition: all 0.8s var(--ease-elastic);
            will-change: transform, width, height, opacity;
            transform-origin: center center;
            cursor: pointer;
        }

        .slot img, .slot video {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 1.2s var(--ease-elastic), filter 0.5s;
        }

        /* States Logic */
        .slot.center { 
            z-index: 10; opacity: 1; transform: translateX(0) scale(1); 
            box-shadow: 0 30px 70px rgba(0,0,0,0.8);
        }
        .slot.left { 
            z-index: 5; opacity: 0.3; transform: translateX(-110%) scale(0.85) rotateY(5deg); 
            filter: grayscale(1); pointer-events: auto; /* Permite clique para navegar */
        }
        .slot.right { 
            z-index: 5; opacity: 0.3; transform: translateX(110%) scale(0.85) rotateY(-5deg); 
            filter: grayscale(1); pointer-events: auto;
        }
        .slot.hidden { opacity: 0; transform: scale(0); pointer-events: none; }

        /* === INFO PANEL (REVELATION UI) === */
        .info-panel {
            position: absolute; bottom: 0; left: 0; width: 100%;
            padding: 4rem 1.5rem 1.5rem 1.5rem; /* Gradiente maior para leitura */
            background: linear-gradient(to top, rgba(0,0,0,0.95) 10%, rgba(0,0,0,0.6) 50%, transparent 100%);
            transform: translateY(105%); opacity: 0;
            transition: transform 0.6s var(--ease-elastic), opacity 0.4s;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            pointer-events: none; /* Deixa o clique passar para a imagem se precisar */
        }
        
        .slot.expanded .info-panel { transform: translateY(0); opacity: 1; }
        .slot.expanded img { transform: scale(1.05); }

        .btn-expand {
            margin-top: 10px; font-size: 0.7rem; letter-spacing: 0.2em; color: var(--accent-gold);
            border: 1px solid var(--accent-gold); padding: 5px 15px; border-radius: 20px;
            opacity: 0.8; text-transform: uppercase;
        }

        /* === DESKTOP SIZING === */
        #hero-track .slot.center { width: 700px; height: 100%; }
        #hero-track .slot.left, #hero-track .slot.right { width: 400px; height: 80%; }

        #acervo-track .slot.center { width: 600px; height: 100%; }
        #acervo-track .slot.left, #acervo-track .slot.right { width: 350px; height: 80%; }

        #memorias-track .slot.center.v-landscape { width: 600px; height: 100%; }
        #memorias-track .slot.center.v-portrait { width: 320px; height: 105%; }

        /* === INDICATORS & ACTIONS === */
        .nav-ui { text-align: center; margin-top: 1.5rem; opacity: 0; animation: fadeInPage 1s 1s forwards; }
        .dots { display: inline-flex; gap: 8px; margin-bottom: 1rem; }
        .dot { width: 4px; height: 4px; background: #333; border-radius: 50%; transition: 0.3s; }
        .dot.active { width: 20px; background: var(--accent-gold); border-radius: 4px; }
        
        .btn-gallery {
            display: inline-block; font-family: 'Manrope', sans-serif; font-size: 0.75rem;
            color: var(--text-secondary); text-decoration: none; border-bottom: 1px solid #333;
            padding-bottom: 2px; transition: 0.3s; letter-spacing: 0.1em; cursor: pointer;
        }
        .btn-gallery:hover { color: var(--accent-gold); border-color: var(--accent-gold); }

        /* === LIGHTBOX IMMERSIVE (FULLSCREEN) === */
        .lightbox {
            position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.4s ease;
            backdrop-filter: blur(10px);
        }
        .lightbox.active { opacity: 1; visibility: visible; }
        
        .lightbox-content {
            width: 100%; height: 80vh; display: flex; justify-content: center; align-items: center;
            position: relative;
        }
        .lightbox img {
            max-width: 95%; max-height: 95%; width: auto; height: auto;
            object-fit: contain; box-shadow: 0 0 50px rgba(0,0,0,0.5);
            transform: scale(0.9); transition: transform 0.5s var(--ease-elastic);
        }
        .lightbox.active img { transform: scale(1); }
        
        .lightbox-close {
            position: absolute; top: 20px; right: 20px; color: #fff; font-size: 2rem;
            cursor: pointer; opacity: 0.7; padding: 10px; z-index: 2001;
        }

        /* === MOBILE OTTIMIZZAZIONE (A OBRA PRIMA) === */
        @media (max-width: 768px) {
            .header { height: 12vh; align-items: center; padding-bottom: 0; }
            
            /* Ajuste de Proporção para HORIZONTAL (16:9 like) */
            .track-container { height: 260px; } /* Altura reduzida para formato paisagem */
            
            /* HERO Mobile */
            #hero-track { height: 350px; } /* Hero pode ser mais alto */
            #hero-track .slot.center { width: 90vw; height: 100%; } 
            
            /* ACERVO Mobile - Horizontal e Panorâmico */
            #acervo-track { height: 250px; }
            #acervo-track .slot.center { 
                width: 88vw; /* Bem largo */
                height: 100%; /* Respeita a altura container */
            }
            /* Laterais "Espiando" (Peek Effect) */
            #acervo-track .slot.left { transform: translateX(-94%) scale(0.9); opacity: 0.4; display: block; }
            #acervo-track .slot.right { transform: translateX(94%) scale(0.9); opacity: 0.4; display: block; }

            /* VÍDEOS Mobile - Inteligente */
            #memorias-track { height: 280px; }
            #memorias-track .slot.center.v-landscape { width: 90vw; height: 220px; } /* Vídeo Wide */
            #memorias-track .slot.center.v-portrait { width: 65vw; height: 100%; } /* Vídeo Vertical */

            /* Ajuste Info Panel Mobile */
            .info-panel { padding-bottom: 2rem; }
            .info-panel h3 { font-size: 1.5rem; margin-bottom: 0.5rem; }
            
            /* Lightbox Mobile */
            .lightbox-content { height: 70vh; }
        }

        /* === FOOTER === */
        footer {
            text-align: center; padding: 4rem 0 2rem 0;
            border-top: 1px solid rgba(255,255,255,0.05); margin-top: 4rem;
        }
        .footer-sig {
            font-family: 'Manrope', sans-serif; font-size: 0.7rem; color: #444; letter-spacing: 0.2em;
        }

    </style>
</head>
<body>

    <div class="surge-overlay" id="surge-layer"></div>

    <header class="header">
        <div class="logo-container" id="logo-trigger">
            <div class="logo-pulse"></div>
            <img src="logo.png" alt="G" class="brand-logo">
        </div>
    </header>

    <section class="section-wrapper">
        <div class="track-container" id="hero-track"></div>
        <div class="nav-ui">
            <div class="dots" id="hero-dots"></div>
            <div style="height: 20px;"></div> <h2 id="hero-title" class="serif" style="font-size: 1.8rem; margin-bottom: 0.5rem;">Carregando...</h2>
            <p id="hero-meta" class="meta">...</p>
        </div>
    </section>

    <section class="section-wrapper">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 class="serif" style="font-size: 2rem; color: #fff;">Acervo</h2>
            <p class="meta" style="color: var(--accent-gold);">Coleção Recente</p>
        </div>

        <div class="track-container" id="acervo-track"></div>
        
        <div class="nav-ui">
            <div class="dots" id="acervo-dots"></div>
            <div>
                <a href="obras.html" class="btn-gallery">ABRIR ACERVO COMPLETO</a>
            </div>
        </div>
    </section>

    <section class="section-wrapper">
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 class="serif" style="font-size: 2rem;">Memórias</h2>
            <p class="meta">Fragmentos do Tempo</p>
        </div>

        <div class="track-container" id="memorias-track"></div>
        <div class="nav-ui">
            <div class="dots" id="memo-dots"></div>
        </div>
    </section>

    <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
        <div class="lightbox-close" onclick="toggleLightbox(false)">×</div>
        <div class="lightbox-content">
            <img src="" id="lightbox-img" onclick="event.stopPropagation()">
        </div>
        <div style="text-align: center; z-index: 2002;">
            <h3 id="lightbox-title" class="serif" style="font-size: 1.5rem;"></h3>
            <p id="lightbox-meta" class="meta" style="color: var(--accent-gold); margin-top: 0.5rem;"></p>
        </div>
    </div>

    <footer>
        <p class="footer-sig">GENNOZ © 2000</p>
    </footer>

    <script>
        // === 1. PARSER ENGINE (Tratamento de Strings) ===
        // Garante que nomes de arquivos virem títulos bonitos
        function parseFilename(filename, type) {
            const clean = filename.split('.').slice(0, -1).join('');
            const parts = clean.split('-');
            
            // Tratamento especial: remove "_" e troca por espaço
            const title = parts[0] ? parts[0].replace(/_/g, ' ') : "Sem Título";
            
            let meta = "";
            let place = "";
            
            if (parts.length >= 3) {
                place = parts[2].toUpperCase().replace(/_/g, ' ');
                meta = `${parts[1]} • ${place}`;
            } else if (parts.length === 2) {
                meta = parts[1].toUpperCase();
            }

            return { src: filename, title, meta, place, type };
        }

        // === 2. BANCO DE DADOS (Arquivos renomeados com "_" e sem acentos) ===
        const dataHero = [
            parseFilename("Eu_e_Nuz-2025-Prazeres.jpg", 'hero'),
            parseFilename("Familia-2025-Prazeres.jpg", 'hero'),
            parseFilename("Eu_Ela_e_os_Bebes-2025-Prazeres.jpg", 'hero')
        ];

        const dataAcervo = [
            parseFilename("Praia_de_Serrambi-2024-Ipojuca.jpg", 'img'),
            parseFilename("Orgulho_em_Calhetas-2024-Cabo.jpg", 'img'),
            parseFilename("Praia_de_Piedade-2024-Jaboatao.jpg", 'img'),
            parseFilename("Dia_Azul_em_Prazeres-2024-Jaboatao.jpg", 'img'),
            parseFilename("Engrenagens_do_Interior-2023-Carpina.jpg", 'img'),
            parseFilename("Crias_de_Prazeres-2024-Jaboatao.jpg", 'img')
        ];

        const dataMemorias = [
            { ...parseFilename("De_Boinha-2023-Jaboatao.mp4", 'vid'), orientation: "portrait" },
            { ...parseFilename("Tunel_do_Tempo-2023-Recife.mp4", 'vid'), orientation: "portrait" },
            { ...parseFilename("Aventura_em_Enseadas-2022-Cabo.mp4", 'vid'), orientation: "landscape" },
            { ...parseFilename("Patins_e_Itapuama-2022-Cabo.mp4", 'vid'), orientation: "landscape" }
        ];

        let state = { hero: 0, acervo: 0, memo: 0 };

        // === 3. RENDER ENGINE (Core do Carrossel) ===
        function renderCarousel(trackId, data, currentIdx, stateKey, dotsId) {
            const track = document.getElementById(trackId);
            const dotsContainer = document.getElementById(dotsId);
            
            if(!track) return;
            track.innerHTML = '';

            // Atualiza Dots
            if(dotsContainer) {
                dotsContainer.innerHTML = data.map((_, i) => 
                    `<div class="dot ${i === currentIdx ? 'active' : ''}"></div>`
                ).join('');
            }

            // Atualiza Texto Hero (se for o caso)
            if(trackId === 'hero-track') {
                const titleEl = document.getElementById('hero-title');
                const metaEl = document.getElementById('hero-meta');
                if(titleEl) {
                    titleEl.style.opacity = 0;
                    setTimeout(() => {
                        titleEl.innerText = data[currentIdx].title;
                        metaEl.innerText = data[currentIdx].meta;
                        titleEl.style.opacity = 1;
                    }, 200);
                }
            }

            // Lógica de Renderização Otimizada (Apenas Prev, Current, Next)
            const prevIdx = (currentIdx - 1 + data.length) % data.length;
            const nextIdx = (currentIdx + 1) % data.length;

            data.forEach((item, i) => {
                // Filtro de Performance: Renderiza apenas os necessários
                if (i !== currentIdx && i !== prevIdx && i !== nextIdx) return;

                const slot = document.createElement('div');
                let classes = 'slot';
                let isCenter = false;

                if (i === currentIdx) { 
                    classes += ' center'; 
                    isCenter = true;
                    // Vídeo Orientation Logic
                    if(item.type === 'vid') classes += item.orientation === 'portrait' ? ' v-portrait' : ' v-landscape';
                }
                else if (i === prevIdx) classes += ' left';
                else if (i === nextIdx) classes += ' right';

                slot.className = classes;

                // Montagem do HTML Interno
                let content = '';
                if (item.type === 'vid') {
                    content = `<video src="${item.src}" loop playsinline muted ${isCenter ? 'autoplay' : ''}></video>`;
                } else {
                    content = `<img src="${item.src}" alt="${item.title}" loading="eager">`;
                }

                // Adiciona Painel de Info (Apenas se não for Hero, para evitar duplicidade)
                if (item.type !== 'hero') {
                    content += `
                        <div class="info-panel">
                            <h3 class="serif" style="color:#fff; margin-bottom:5px;">${item.title}</h3>
                            <p class="meta" style="margin-bottom:1rem;">${item.meta}</p>
                            <div class="btn-expand">EXPANDIR</div>
                        </div>
                    `;
                }

                slot.innerHTML = content;

                // === LOGICA DE INTERAÇÃO (TOUCH/CLICK) ===
                slot.onclick = () => {
                    // 1. Navegação Lateral
                    if (slot.classList.contains('left')) changeSlide(stateKey, -1);
                    else if (slot.classList.contains('right')) changeSlide(stateKey, 1);
                    
                    // 2. Clique no Centro (Lógica Inteligente)
                    else if (slot.classList.contains('center')) {
                        if (item.type === 'vid') {
                            // Vídeo: Toggle Som
                            const v = slot.querySelector('video');
                            v.muted = !v.muted;
                        } else {
                            // Imagem: 1º Clique Expande Info, 2º Clique Abre Lightbox
                            if (slot.classList.contains('expanded')) {
                                toggleLightbox(true, item); // Abre Modal Fullscreen
                            } else {
                                // Reseta outros
                                document.querySelectorAll(`#${trackId} .slot`).forEach(s => s.classList.remove('expanded'));
                                slot.classList.add('expanded'); // Mostra Info
                            }
                        }
                    }
                };

                track.appendChild(slot);
            });

            // Re-aplicar Swipe Logic
            setupSwipe(track, stateKey);
        }

        function changeSlide(key, dir) {
            if (key === 'hero') state.hero = (state.hero + dir + dataHero.length) % dataHero.length;
            if (key === 'acervo') state.acervo = (state.acervo + dir + dataAcervo.length) % dataAcervo.length;
            if (key === 'memo') state.memo = (state.memo + dir + dataMemorias.length) % dataMemorias.length;
            renderAll();
        }

        // === 4. LIGHTBOX SYSTEM (Visualização Completa) ===
        function toggleLightbox(show, item = null) {
            const lb = document.getElementById('lightbox');
            if (show && item) {
                document.getElementById('lightbox-img').src = item.src;
                document.getElementById('lightbox-title').innerText = item.title;
                document.getElementById('lightbox-meta').innerText = item.meta;
                lb.classList.add('active');
                document.body.style.overflow = 'hidden'; // Trava scroll fundo
            } else {
                lb.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        function closeLightbox(e) {
            if (e.target.id === 'lightbox') toggleLightbox(false);
        }

        // === 5. GESTURE CONTROL (Swipe Fluido) ===
        function setupSwipe(element, key) {
            let startX = 0;
            element.ontouchstart = e => startX = e.changedTouches[0].screenX;
            element.ontouchend = e => {
                const endX = e.changedTouches[0].screenX;
                const diff = endX - startX;
                if (Math.abs(diff) > 40) { // Sensibilidade
                    changeSlide(key, diff > 0 ? -1 : 1); // Invertido para natural feel
                }
            };
        }

        // === 6. INTERAÇÃO LOGO (SURGE EFFECT) ===
        document.getElementById('logo-trigger').addEventListener('click', function() {
            // Ativa visual da logo
            this.classList.add('active');
            
            // Ativa efeito de onda na tela
            document.body.classList.add('surge-active');

            // Feedback Tátil (apenas mobile compatível)
            if (navigator.vibrate) navigator.vibrate(50);

            // Reset após animação
            setTimeout(() => {
                this.classList.remove('active');
                document.body.classList.remove('surge-active');
            }, 2000);
        });

        // === INIT ===
        function renderAll() {
            renderCarousel('hero-track', dataHero, state.hero, 'hero', 'hero-dots');
            renderCarousel('acervo-track', dataAcervo, state.acervo, 'acervo', 'acervo-dots');
            renderCarousel('memorias-track', dataMemorias, state.memo, 'memo', 'memo-dots');
        }

        window.onload = renderAll;

    </script>
</body>
</html>
