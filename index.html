<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gennoz | Acervo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #050505;
            --text-main: #Eaeaea;
            --text-muted: #666;
            --accent-gold: #D4AF37; 
            --thread-color: rgba(255, 255, 255, 0.05);
            
            /* Dimens√µes Desktop */
            --slot-std-width: 450px;
            --slot-std-height: 300px;
            
            /* Curvas de Anima√ß√£o - "Luxo Din√¢mico" */
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            padding-bottom: 5rem;
            position: relative;
        }

        /* === SISTEMA DE ENERGIA (BACKGROUND) === */
        .energy-system {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
            overflow: hidden;
        }

        /* O Fio Vertical (Espinha) */
        .thread-vertical {
            position: absolute; left: 50%; 
            top: 25vh; /* Inicia atr√°s do Hero */
            height: 220vh; /* Termina ap√≥s v√≠deos (ajust√°vel) */
            width: 1px;
            background: linear-gradient(to bottom, transparent, var(--thread-color) 10%, var(--thread-color) 90%, transparent);
            transform: translateX(-50%);
            opacity: 0.5;
        }

        /* O Pulso de Luz Vertical */
        .pulse-vertical {
            position: absolute; left: 50%; top: 20vh;
            width: 2px; height: 150px;
            background: linear-gradient(to bottom, transparent, #fff, var(--accent-gold), transparent);
            transform: translateX(-50%) translateY(-200px);
            opacity: 0;
            box-shadow: 0 0 25px var(--accent-gold);
            z-index: 1;
        }

        /* Linhas de Choque Horizontais (Cruzamentos) */
        .shockwave-line {
            position: absolute; left: 50%; transform: translateX(-50%);
            width: 0%; height: 1px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 90%);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            opacity: 0;
            transition: width 0.8s var(--ease-out-expo), opacity 0.5s ease;
        }
        /* Posi√ß√µes dos Cruzamentos */
        .sw-1 { top: 110vh; } /* Entre Hero e Acervo */
        .sw-2 { top: 190vh; } /* Entre Acervo e Mem√≥rias */


        /* === TIPOGRAFIA === */
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; font-weight: 400; letter-spacing: 0.02em; }
        .section-title { font-size: 2.2rem; color: var(--text-main); text-align: center; }
        .meta-data { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.25em; margin-top: 0.8rem; }
        
        .collection-link { 
            color: var(--text-muted); text-decoration: none; font-size: 0.75rem; 
            letter-spacing: 0.15em; transition: 0.4s; position: relative;
        }
        .collection-link::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%; height: 1px; 
            background: var(--accent-gold); transition: width 0.4s;
        }
        .collection-link:hover { color: #fff; }
        .collection-link:hover::after { width: 100%; }


        /* === 1. LOGO & HEADER === */
        .logo-section {
            height: 20vh; /* Compacto para aproximar do Hero */
            display: flex; justify-content: center; align-items: flex-end; /* Alinha logo mais perto do fundo da se√ß√£o */
            padding-bottom: 2rem;
            position: relative; z-index: 20;
        }
        
        .brand-logo { 
            width: 100px; 
            opacity: 0.2; 
            transition: all 0.6s var(--ease-out-expo);
            cursor: pointer;
            filter: grayscale(1);
        }
        
        /* Efeito de Clique/Hover na Logo */
        .brand-logo:hover, .brand-logo.active { 
            opacity: 1; 
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.6)); /* Explos√£o de luz */
            transform: scale(1.08);
        }


        /* === 2. HERO CAROUSEL === */
        .hero-section {
            min-height: 80vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            position: relative; z-index: 10; margin-bottom: 6rem;
        }

        .hero-track-container {
            width: 100%; height: 55vh; 
            display: flex; justify-content: center; align-items: center;
            position: relative;
            perspective: 1200px;
        }

        .hero-info-wrapper {
            margin-top: 2rem; text-align: center; height: 100px;
            opacity: 0; transform: translateY(30px); transition: 0.8s var(--ease-out-expo);
        }
        .hero-info-wrapper.visible { opacity: 1; transform: translateY(0); }
        .hero-title { font-size: 4rem; text-shadow: 0 30px 60px rgba(0,0,0,0.8); line-height: 1.1; }


        /* === CARROSSEL CORE (TR√çADE) === */
        .carousel-track {
            position: relative;
            width: 100%; max-width: 100vw;
            height: var(--slot-std-height);
            display: flex; justify-content: center; align-items: center;
            margin-top: 2rem;
        }

        .slot {
            position: absolute;
            border-radius: 4px;
            overflow: hidden;
            background: #000;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            cursor: pointer;
            transition: all 0.8s var(--ease-out-expo); /* Movimento Suave e Premium */
        }
        
        .slot img, .slot video { width: 100%; height: 100%; object-fit: cover; }

        /* ESTADOS DE POSI√á√ÉO */
        
        /* -- CENTRAL -- */
        .slot.center {
            z-index: 10;
            opacity: 1; filter: grayscale(0);
            box-shadow: 0 25px 60px rgba(0,0,0,0.9);
            transform: translateX(0) scale(1);
        }
        
        /* -- LATERAIS -- */
        .slot.left {
            z-index: 5;
            width: var(--slot-std-width) !important; /* For√ßa tamanho padr√£o nas laterais */
            height: var(--slot-std-height) !important;
            transform: translateX(-100%) scale(0.85);
            opacity: 0.2; filter: grayscale(1);
        }
        .slot.right {
            z-index: 5;
            width: var(--slot-std-width) !important;
            height: var(--slot-std-height) !important;
            transform: translateX(100%) scale(0.85);
            opacity: 0.2; filter: grayscale(1);
        }
        /* Hover nas laterais */
        .slot.left:hover, .slot.right:hover { opacity: 0.6; filter: grayscale(0.5); transform: translateX(-100%) scale(0.88); }
        .slot.right:hover { transform: translateX(100%) scale(0.88); }

        .slot.hidden { z-index: 0; opacity: 0; transform: scale(0); pointer-events: none; }


        /* === VARIA√á√ïES DE TAMANHO (SMART RATIO) === */
        
        /* Hero Sizes */
        .hero-track-container .slot.center { width: 650px; height: 100%; }
        .hero-track-container .slot.left { transform: translateX(-85%) scale(0.8); }
        .hero-track-container .slot.right { transform: translateX(85%) scale(0.8); }

        /* Acervo Sizes */
        #acervo-track .slot.center { width: var(--slot-std-width); height: 100%; }
        
        /* Video Sizes (Din√¢mico) */
        /* A classe .v-land ou .v-port √© adicionada via JS no slot central */
        #memorias-track .slot.center.v-landscape { width: 600px; height: 100%; }
        #memorias-track .slot.center.v-portrait { width: 280px; height: 110%; } /* Levemente mais alto */


        /* === LAYERS DE INFO E INTERA√á√ÉO === */
        .slot-info-layer {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(2px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: 0.4s ease;
        }
        .slot.center:hover .slot-info-layer.video-hint { opacity: 1; } /* Play hint */
        .slot.center.show-info .slot-info-layer { opacity: 1; pointer-events: auto; }


        /* === SE√á√ïES === */
        .section-wrapper { 
            position: relative; z-index: 10; padding: 4rem 0; width: 100%; 
            display: flex; flex-direction: column; align-items: center;
        }
        
        .section-header-flex {
            width: 85%; max-width: 1200px;
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 2rem; padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        .section-header-flex.center { justify-content: center; text-align: center; border-bottom: none; }


        /* === MODAL HERO (EXPANS√ÉO) === */
        .hero-modal {
            position: fixed; inset: 0; background: #080808; z-index: 100;
            display: grid; grid-template-columns: 1.5fr 1fr;
            opacity: 0; visibility: hidden; transition: 0.6s var(--ease-out-expo);
        }
        .hero-modal.active { opacity: 1; visibility: visible; }
        
        .hero-modal-img-box {
            width: 100%; height: 100%; background: #000;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
        }
        .hero-modal-img-box img { max-width: 100%; max-height: 100%; object-fit: contain; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
        
        .hero-modal-content { 
            padding: 5rem; display: flex; flex-direction: column; justify-content: center;
            border-left: 1px solid rgba(255,255,255,0.05);
        }


        /* === MOBILE === */
        @media (max-width: 768px) {
            :root {
                --slot-std-width: 260px;
                --slot-std-height: 200px;
            }
            .hero-title { font-size: 2.8rem; }
            .hero-track-container .slot.center { width: 85vw; }
            .hero-track-container .slot.left { transform: translateX(-15%) scale(0.9); opacity: 0; }
            .hero-track-container .slot.right { transform: translateX(15%) scale(0.9); opacity: 0; }

            /* Mobile Video logic: Fixar largura para caber na tela */
            #memorias-track .slot.center.v-landscape { width: 90vw; }
            #memorias-track .slot.center.v-portrait { width: 60vw; }
            
            .slot.left, .slot.right { opacity: 0; pointer-events: none; } /* Esconde laterais no mobile para foco */

            .hero-modal { grid-template-columns: 1fr; grid-template-rows: 50% 50%; }
            .hero-modal-content { padding: 2rem; border-left: none; }
            
            .section-header-flex { flex-direction: column; gap: 1rem; align-items: center; text-align: center; }
        }

    </style>
</head>
<body>

    <div class="energy-system">
        <div class="thread-vertical"></div>
        
        <div class="shockwave-line sw-1" id="sw-1"></div>
        <div class="shockwave-line sw-2" id="sw-2"></div>
        
        <div class="pulse-vertical" id="main-pulse"></div>
    </div>

    <header class="logo-section">
        <img src="logo.png" alt="Gennoz" class="brand-logo" id="logo-trigger">
    </header>

    <section class="hero-section" id="section-hero">
        <div class="hero-track-container" id="hero-track">
            </div>
        
        <div class="hero-info-wrapper" id="hero-text-box">
            <h1 class="hero-title serif" id="hero-title-el">Carregando...</h1>
            <p class="meta-data" id="hero-meta-el">...</p>
        </div>
    </section>

    <div class="hero-modal" id="hero-modal">
        <div class="hero-modal-img-box">
            <img src="" id="hero-modal-img">
        </div>
        <div class="hero-modal-content">
            <p class="meta-data" style="color: var(--accent-gold); margin-bottom: 1rem;">Arquivo Detalhado</p>
            <h2 class="serif" id="hero-modal-title" style="font-size: 3rem; margin-bottom: 2rem; color: #fff;">T√≠tulo</h2>
            <p style="color: #bbb; line-height: 1.8; font-size: 1.1rem;">
                Imers√£o total na obra selecionada. Este espa√ßo isolado permite a contempla√ß√£o dos detalhes sem distra√ß√µes. A luz, a sombra e a composi√ß√£o s√£o os protagonistas aqui.
            </p>
            <button onclick="toggleHeroModal(false)" style="margin-top: 3rem; background: transparent; border: 1px solid #444; color: #fff; padding: 1rem 2rem; cursor: pointer; align-self: flex-start;">FECHAR</button>
        </div>
    </div>

    <section class="section-wrapper" id="section-acervo">
        <div class="section-header-flex">
            <div>
                <h2 class="serif section-title">Acervo</h2>
                <p class="meta-data">Recentes</p>
            </div>
            <a href="colecoes.html" class="collection-link">EXPLORAR TODAS AS COLE√á√ïES ‚Üí</a>
        </div>
        
        <div class="carousel-track" id="acervo-track">
            </div>
    </section>

    <section class="section-wrapper" id="section-memorias">
        <div class="section-header-flex center">
            <div>
                <h2 class="serif section-title">Mem√≥rias</h2>
                <p class="meta-data">Pernambuco</p>
            </div>
        </div>
        
        <div class="carousel-track" id="memorias-track">
            </div>
    </section>

    <footer>
        <div style="text-align: center; padding: 5rem 0; opacity: 0.3; font-size: 0.7rem; letter-spacing: 0.3em;">
            GENNOZ ¬© 2025 ‚Ä¢ PERNAMBUCO
        </div>
    </footer>

    <script>
        // === BASE DE DADOS ===
        const dataHero = [
            { src: "familia02.jpg", title: "Paz", meta: "2025 ‚Ä¢ PERNAMBUCO" },
            { src: "familia01.jpg", title: "Fam√≠lia", meta: "2025 ‚Ä¢ PERNAMBUCO" },
            { src: "familia03.jpg", title: "Amor", meta: "2025 ‚Ä¢ PERNAMBUCO" }
        ];

        const dataAcervo = [
            { src: "imagem01.jpg", title: "Calhetas", meta: "CABO", link: "obra.html" },
            { src: "imagem02.jpg", title: "Piedade", meta: "JABOAT√ÉO", link: "obra.html" },
            { src: "imagem03.jpg", title: "Prazeres", meta: "JABOAT√ÉO", link: "obra.html" },
            { src: "imagem04.jpg", title: "Prazeres", meta: "JABOAT√ÉO", link: "obra.html" }
        ];

        // orientation: define o formato para o Smart Ratio
        const dataMemorias = [
            { src: "video01.mp4", title: "Passeio", orientation: "portrait" },
            { src: "video02.mp4", title: "Distra√ß√£o", orientation: "portrait" },
            { src: "video05.mp4", title: "T√∫nel", orientation: "portrait" },
            { src: "video04.mp4", title: "Adrenalina", orientation: "landscape" },
            { src: "video03.mp4", title: "Noite", orientation: "landscape" }
        ];

        let state = { hero: 0, acervo: 0, memo: 0 };


        // === ENGINE DE ANIMA√á√ÉO & CARROSSEL ===
        function renderCarousel(trackId, data, currentIdx, type, stateKey) {
            const container = document.getElementById(trackId);
            container.innerHTML = '';

            const prevIdx = (currentIdx - 1 + data.length) % data.length;
            const nextIdx = (currentIdx + 1) % data.length;

            data.forEach((item, i) => {
                // Cria todos os slots, mas apenas posiciona os 3 relevantes
                const slot = document.createElement('div');
                let classes = 'slot';
                let isCenter = false;

                if (i === currentIdx) { 
                    classes += ' center'; 
                    isCenter = true;
                    // Smart Ratio para V√≠deos
                    if (type === 'vid') classes += item.orientation === 'portrait' ? ' v-portrait' : ' v-landscape';
                } 
                else if (i === prevIdx) classes += ' left'; 
                else if (i === nextIdx) classes += ' right'; 
                else classes += ' hidden';

                slot.className = classes;

                // CONTE√öDO
                if (type === 'vid') {
                    // Autoplay apenas se for o central
                    slot.innerHTML = `
                        <video src="${item.src}" loop playsinline muted ${isCenter ? 'autoplay' : ''}></video>
                        <div class="slot-info-layer video-hint">
                            <span style="font-size: 2rem; color: #fff;">${isCenter ? 'üîä' : '‚ñ∂'}</span>
                        </div>
                    `;
                } else {
                    slot.innerHTML = `<img src="${item.src}">`;
                    if (type !== 'hero') {
                        slot.innerHTML += `
                            <div class="slot-info-layer">
                                <h3 class="serif" style="color:#fff; font-size:1.5rem;">${item.title}</h3>
                                <p class="meta-data" style="margin-bottom:1rem;">${item.meta}</p>
                                <span style="border:1px solid #fff; padding:5px 15px; font-size:0.7rem;">DETALHES</span>
                            </div>
                        `;
                    }
                }

                // INTERA√á√ÉO
                slot.onclick = () => {
                    if (slot.classList.contains('left')) updateState(stateKey, -1);
                    else if (slot.classList.contains('right')) updateState(stateKey, 1);
                    else if (slot.classList.contains('center')) handleCenterClick(slot, item, type);
                };

                // Video Hover (Mouseover play preview for sides)
                if (type === 'vid' && !isCenter) {
                    slot.onmouseenter = () => { slot.querySelector('video').play(); };
                    slot.onmouseleave = () => { 
                        const v = slot.querySelector('video');
                        v.pause(); v.currentTime = 0; 
                    };
                }

                container.appendChild(slot);
            });
        }

        function updateState(key, dir) {
            if (key === 'hero') {
                state.hero = (state.hero + dir + dataHero.length) % dataHero.length;
                renderHeroText();
            }
            if (key === 'acervo') state.acervo = (state.acervo + dir + dataAcervo.length) % dataAcervo.length;
            if (key === 'memo') state.memo = (state.memo + dir + dataMemorias.length) % dataMemorias.length;
            
            renderAll();
        }

        function handleCenterClick(slot, item, type) {
            if (type === 'hero') {
                document.getElementById('hero-modal-img').src = item.src;
                document.getElementById('hero-modal-title').innerText = item.title;
                toggleHeroModal(true);
            } else if (type === 'img') {
                if (!slot.classList.contains('show-info')) slot.classList.add('show-info');
                else window.location.href = item.link;
            } else if (type === 'vid') {
                // Toggle Som
                const v = slot.querySelector('video');
                v.muted = !v.muted;
                slot.querySelector('span').innerText = v.muted ? 'üîä' : 'üîà';
            }
        }

        function renderHeroText() {
            const box = document.getElementById('hero-text-box');
            box.classList.remove('visible');
            setTimeout(() => {
                document.getElementById('hero-title-el').innerText = dataHero[state.hero].title;
                document.getElementById('hero-meta-el').innerText = dataHero[state.hero].meta;
                box.classList.add('visible');
            }, 300);
        }

        function renderAll() {
            renderCarousel('hero-track', dataHero, state.hero, 'hero', 'hero');
            renderCarousel('acervo-track', dataAcervo, state.acervo, 'img', 'acervo');
            renderCarousel('memorias-track', dataMemorias, state.memo, 'vid', 'memo');
        }

        function toggleHeroModal(show) {
            const m = document.getElementById('hero-modal');
            m.classList.toggle('active', show);
        }


        // === INTERA√á√ÉO DE ENERGIA (PULSO & SHOCKWAVES) ===
        const logo = document.getElementById('logo-trigger');
        const pulse = document.getElementById('main-pulse');
        const sw1 = document.getElementById('sw-1');
        const sw2 = document.getElementById('sw-2');

        logo.addEventListener('click', () => {
            // 1. Ativa Logo
            logo.classList.add('active');
            setTimeout(() => logo.classList.remove('active'), 1000);

            // 2. Reseta Pulso
            pulse.style.transition = 'none';
            pulse.style.transform = 'translateX(-50%) translateY(-200px)';
            pulse.style.opacity = '1';
            void pulse.offsetWidth; // Force Reflow

            // 3. Dispara Pulso Vertical
            pulse.style.transition = 'transform 2s linear, opacity 2s ease-in';
            pulse.style.transform = 'translateX(-50%) translateY(250vh)';

            // 4. Dispara Shockwaves Horizontais (Timings calculados para a descida)
            // Assumindo viewport height m√©dia, a onda leva ~2s para descer.
            // Cruzamento 1 (~40%) -> 800ms
            setTimeout(() => triggerShockwave(sw1), 600);
            // Cruzamento 2 (~70%) -> 1400ms
            setTimeout(() => triggerShockwave(sw2), 1200);

            // Limpeza Final
            setTimeout(() => { pulse.style.opacity = '0'; }, 2000);
        });

        function triggerShockwave(el) {
            el.style.opacity = '1';
            el.style.width = '100%'; // Expand
            setTimeout(() => {
                el.style.opacity = '0'; // Fade out
            }, 300);
            setTimeout(() => {
                el.style.width = '0%'; // Reset
            }, 800);
        }

        // Init
        window.onload = () => {
            renderAll();
            renderHeroText();
        };

    </script>
</body>
</html>
