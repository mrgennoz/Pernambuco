<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gennoz | Acervo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #050505;
            --text-main: #Eaeaea;
            --text-muted: #666;
            --accent-gold: #D4AF37; /* Ouro Nobre */
            --thread-color: rgba(255, 255, 255, 0.08);
            
            /* Configuração de Slots */
            --slot-width-desktop: 450px;
            --slot-height-desktop: 300px;
            --slot-scale-side: 0.85;
            
            --transition-smooth: cubic-bezier(0.22, 1, 0.36, 1); /* Curva suave profissional */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            padding-bottom: 5rem;
            position: relative;
        }

        /* === O FILAMENTO DE ENERGIA (Fundo Interativo) === */
        .energy-thread-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }
        
        /* A Linha Central */
        .thread-line {
            position: absolute; left: 50%; top: 150px; bottom: 50px; width: 1px;
            background: var(--thread-color);
            transform: translateX(-50%);
            transition: background 1s;
        }
        
        /* O "Nó" de Luz que viaja */
        .energy-pulse {
            position: absolute; left: 50%; top: 150px; width: 4px; height: 100px;
            background: linear-gradient(to bottom, transparent, var(--accent-gold), #fff, transparent);
            transform: translateX(-50%) translateY(-200px);
            opacity: 0;
            box-shadow: 0 0 20px var(--accent-gold);
            border-radius: 50%;
        }

        /* Pontos de conexão entre seções */
        .connection-node {
            position: absolute; left: 50%; width: 10px; height: 10px;
            background: var(--bg-color); border: 1px solid var(--thread-color);
            transform: translateX(-50%) rotate(45deg); /* Diamante */
            transition: all 0.5s;
        }
        .connection-node.lit { border-color: var(--accent-gold); box-shadow: 0 0 15px var(--accent-gold); background: var(--accent-gold); }

        /* Posições dos Nós (Ajuste conforme altura das seções) */
        .node-hero { top: 80vh; }
        .node-acervo { top: 160vh; }
        .node-memorias { top: 240vh; }


        /* === TIPOGRAFIA === */
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; font-weight: 400; letter-spacing: 0.02em; }
        .hero-title { font-size: 4.5rem; text-shadow: 0 20px 40px rgba(0,0,0,0.8); margin: 0; line-height: 1; }
        .section-title { font-size: 2.5rem; color: var(--text-main); }
        .meta-data { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.25em; margin-top: 1rem; }
        .collection-link { color: var(--text-muted); text-decoration: none; font-size: 0.8rem; letter-spacing: 0.1em; transition: 0.3s; border-bottom: 1px solid transparent; }
        .collection-link:hover { color: var(--accent-gold); border-color: var(--accent-gold); }


        /* === 1. LOGO (MISTÉRIO) === */
        .logo-section {
            height: 25vh; display: flex; justify-content: center; align-items: center;
            position: relative; z-index: 20;
        }
        
        .brand-logo { 
            width: 110px; 
            opacity: 0.15; /* Requisito: Opacidade baixa */
            transition: all 0.8s var(--transition-smooth);
            cursor: pointer;
            filter: grayscale(1);
        }
        
        .brand-logo:hover, .brand-logo.active { 
            opacity: 1; 
            filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.4)); /* Glow Dourado Sutil no PNG */
            transform: scale(1.05);
        }


        /* === 2. HERO CAROUSEL === */
        .hero-section {
            min-height: 75vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; z-index: 10; margin-bottom: 8rem;
        }

        /* Container do Slot Hero (Maior que os outros) */
        .hero-track-container {
            width: 100%; height: 50vh; 
            display: flex; justify-content: center; align-items: center;
            position: relative;
            perspective: 1000px;
        }

        .hero-info-wrapper {
            margin-top: 3rem; text-align: center; height: 100px; /* Altura fixa para não pular */
            opacity: 0; transform: translateY(20px); transition: 0.5s;
        }
        .hero-info-wrapper.visible { opacity: 1; transform: translateY(0); }


        /* === 3. SEÇÕES GERAIS (ACERVO & MEMÓRIAS) === */
        .section-wrapper { 
            position: relative; z-index: 10; padding: 4rem 0; width: 100%; 
            display: flex; flex-direction: column; align-items: center;
        }

        /* CABEÇALHO DE SEÇÃO (Restaurado para Coleções) */
        .section-header-row {
            width: 80%; max-width: 1200px;
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 3rem; padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.05); /* Linha sutil separando header do carrossel */
        }
        .section-header-row.center { justify-content: center; text-align: center; border-bottom: none; }
        
        
        /* === SISTEMA DE SLOTS (CRÍTICO PARA ESTABILIDADE) === */
        .carousel-track {
            position: relative;
            width: 100%; max-width: 100vw;
            height: var(--slot-height-desktop);
            display: flex; justify-content: center; align-items: center;
        }

        .slot {
            position: absolute;
            transition: all 0.6s var(--transition-smooth);
            border-radius: 8px;
            overflow: hidden;
            background: #0a0a0a;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            cursor: pointer;
        }

        /* DIMENSÕES BASE */
        .slot { width: var(--slot-width-desktop); height: 100%; }
        
        /* ESTADOS DE POSIÇÃO */
        /* Centro */
        .slot.center {
            z-index: 10;
            transform: translateX(0) scale(1);
            opacity: 1;
            filter: grayscale(0);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }
        /* Laterais (Anterior/Próximo) */
        .slot.left {
            z-index: 5;
            transform: translateX(-110%) scale(var(--slot-scale-side)); /* 110% afasta o suficiente */
            opacity: 0.3; filter: grayscale(1);
        }
        .slot.right {
            z-index: 5;
            transform: translateX(110%) scale(var(--slot-scale-side));
            opacity: 0.3; filter: grayscale(1);
        }
        /* Escondidos (Fundo) */
        .slot.hidden {
            z-index: 0;
            opacity: 0;
            transform: scale(0.5);
            pointer-events: none;
        }

        /* Hover nas laterais: Colorir */
        .slot.left:hover, .slot.right:hover { filter: grayscale(0); opacity: 0.6; }

        .slot img, .slot video { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s; }
        
        /* HERO MODIFICAÇÕES (Sobrescreve dimensões base) */
        .hero-track-container .slot { width: 600px; height: 100%; } /* Hero é maior */
        .hero-track-container .slot.left { transform: translateX(-80%) scale(0.8); }
        .hero-track-container .slot.right { transform: translateX(80%) scale(0.8); }
        .hero-track-container .slot.center img { transform: scale(1.05); } /* Zoom sutil */

        /* INTERATIVIDADE DENTRO DO SLOT */
        .slot-info-layer {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.7);
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
            opacity: 0; transition: 0.3s;
            padding: 2rem;
        }
        .slot.center.show-info .slot-info-layer { opacity: 1; }


        /* === EXPANSÕES E MODAIS === */
        
        /* Hero Modal (Cinema) */
        .hero-modal {
            position: fixed; inset: 0; background: #050505; z-index: 100;
            display: grid; grid-template-columns: 1.5fr 1fr;
            opacity: 0; visibility: hidden; transition: 0.5s var(--transition-smooth);
        }
        .hero-modal.active { opacity: 1; visibility: visible; }
        
        .hero-modal-img { width: 100%; height: 100%; object-fit: contain; background: black; }
        .hero-modal-content { 
            padding: 4rem; display: flex; flex-direction: column; justify-content: center; 
            border-left: 1px solid rgba(255,255,255,0.1);
        }
        .close-btn { 
            position: absolute; top: 2rem; right: 2rem; 
            background: none; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px 20px; cursor: pointer; transition: 0.3s; 
        }
        .close-btn:hover { border-color: var(--accent-gold); color: var(--accent-gold); }


        /* === MOBILE === */
        @media (max-width: 768px) {
            :root {
                --slot-width-desktop: 280px; /* Cards menores */
            }
            .hero-track-container { height: 40vh; }
            .hero-track-container .slot { width: 80vw; }
            
            /* No mobile, escondemos os laterais quase completamente ou empilhamos?
               Melhor manter a lógica, mas com transform menor */
            .hero-track-container .slot.left { transform: translateX(-15%) scale(0.85); opacity: 0.1; }
            .hero-track-container .slot.right { transform: translateX(15%) scale(0.85); opacity: 0.1; }
            .slot.left { transform: translateX(-15%) scale(0.85); opacity: 0.1; }
            .slot.right { transform: translateX(15%) scale(0.85); opacity: 0.1; }

            .hero-title { font-size: 2.5rem; }
            .hero-modal { grid-template-columns: 1fr; grid-template-rows: 1fr 1fr; overflow-y: auto; }
            .hero-modal-content { padding: 2rem; border-left: none; border-top: 1px solid rgba(255,255,255,0.1); }
            
            .section-header-row { flex-direction: column; align-items: center; gap: 1rem; text-align: center; }
        }

    </style>
</head>
<body>

    <div class="energy-thread-container">
        <div class="thread-line"></div>
        <div class="energy-pulse" id="soul-pulse"></div>
        
        <div class="connection-node node-hero" id="node-1"></div>
        <div class="connection-node node-acervo" id="node-2"></div>
        <div class="connection-node node-memorias" id="node-3"></div>
    </div>

    <header class="logo-section">
        <img src="logo.png" alt="Gennoz" class="brand-logo" id="logo-trigger">
    </header>

    <section class="hero-section" id="section-hero">
        <div class="hero-track-container" id="hero-track">
            </div>
        
        <div class="hero-info-wrapper" id="hero-text-box">
            <h1 class="hero-title serif" id="hero-title-el">Família</h1>
            <p class="meta-data" id="hero-meta-el">2025 • GENNOZ</p>
            <p class="meta-data" style="margin-top: 5px; opacity: 0.5;">[ Clique para Expandir ]</p>
        </div>
    </section>

    <div class="hero-modal" id="hero-modal">
        <button class="close-btn" onclick="toggleHeroModal(false)">FECHAR [ESC]</button>
        <div style="background: #000; display:flex; align-items:center; justify-content:center;">
            <img src="" class="hero-modal-img" id="hero-modal-img">
        </div>
        <div class="hero-modal-content">
            <p class="meta-data" style="color: var(--accent-gold);">OBRA EM DESTAQUE</p>
            <h2 class="hero-title serif" id="hero-modal-title" style="font-size: 3rem; margin-bottom: 2rem;">Título</h2>
            <p style="line-height: 1.8; color: #ccc; font-size: 1.1rem;">
                Esta área é dedicada à imersão total na obra. A estrutura foi pensada para isolar o observador do restante do site, permitindo uma conexão profunda com os detalhes, a luz e a intenção da fotografia.
            </p>
            <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
                <p class="meta-data">GENNOZ • PERNAMBUCO • BRASIL</p>
            </div>
        </div>
    </div>

    <section class="section-wrapper" id="section-acervo">
        <div class="section-header-row">
            <div>
                <h2 class="serif section-title">Acervo</h2>
                <p class="meta-data">Clique 1x para info • 2x para obra</p>
            </div>
            <a href="colecoes.html" class="collection-link">VER TODAS AS COLEÇÕES →</a>
        </div>
        
        <div class="carousel-track" id="acervo-track">
            </div>
    </section>

    <section class="section-wrapper" id="section-memorias">
        <div class="section-header-row center">
            <div>
                <h2 class="serif section-title">Memórias</h2>
                <p class="meta-data">Fragmentos de Pernambuco</p>
            </div>
        </div>
        
        <div class="carousel-track" id="memorias-track">
            </div>
    </section>

    <footer>
        <div style="text-align: center; padding: 4rem; opacity: 0.4; font-size: 0.8rem; letter-spacing: 0.2em;">
            GENNOZ © 2025
        </div>
    </footer>

    <script>
        // === DADOS ===
        const dataHero = [
            { src: "familia02.jpg", title: "Família", meta: "2025 • AFETO" },
            { src: "imagem01.jpg", title: "Raízes", meta: "2024 • TERRA" },
            { src: "imagem07.jpg", title: "Maré", meta: "2024 • SERRAMBI" }
        ];

        const dataAcervo = [
            { src: "imagem01.jpg", title: "Calhetas", meta: "CABO", link: "obra.html" },
            { src: "imagem02.jpg", title: "Piedade", meta: "JABOATÃO", link: "obra.html" },
            { src: "imagem03.jpg", title: "Prazeres", meta: "URBANO", link: "obra.html" },
            { src: "imagem04.jpg", title: "Detalhe", meta: "MACRO", link: "obra.html" },
            { src: "imagem12.jpg", title: "Carpina", meta: "MATA", link: "obra.html" }
        ];

        const dataMemorias = [
            // orientation ajuda a ajustar o CSS se necessário, mas o object-fit cover resolve a maioria
            { src: "video01.mp4", title: "Cores", type: "vid" },
            { src: "video06.mp4", title: "Foco", type: "vid" }, 
            { src: "video02.mp4", title: "Loop", type: "vid" },
            { src: "video03.mp4", title: "Noite", type: "vid" }
        ];

        // Estados
        let idxHero = 0;
        let idxAcervo = 0;
        let idxMemo = 0;


        // === FUNÇÃO CORE: RENDERIZAR CARROSSEL (Lógica de 3 Slots) ===
        function renderCarousel(containerId, data, currentIndex, type, callbackState) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // Define índices: Anterior, Atual, Próximo
            const prevIdx = (currentIndex - 1 + data.length) % data.length;
            const nextIdx = (currentIndex + 1) % data.length;

            data.forEach((item, i) => {
                // Cria elemento apenas se for um dos 3 visíveis (Otimização)
                // Na verdade, para animação suave, precisamos que os elementos existam.
                // Vamos criar todos, mas classificar apenas os 3.
                
                const slot = document.createElement('div');
                let className = 'slot';
                
                if (i === currentIndex) className += ' center';
                else if (i === prevIdx) className += ' left';
                else if (i === nextIdx) className += ' right';
                else className += ' hidden';

                slot.className = className;
                
                // Conteúdo Interno
                let innerHTML = '';
                if (type === 'vid') {
                    innerHTML = `<video src="${item.src}" muted loop playsinline></video>`;
                } else {
                    innerHTML = `<img src="${item.src}">`;
                }

                // Camada de Info (Acervo/Memórias)
                if (type !== 'hero') {
                    innerHTML += `
                        <div class="slot-info-layer">
                            <h3 class="serif" style="font-size: 1.5rem; color: #fff;">${item.title}</h3>
                            <p class="meta-data" style="margin-bottom: 1.5rem;">${item.meta || 'PERNAMBUCO'}</p>
                            ${type === 'img' ? '<span style="border:1px solid #fff; padding: 5px 15px; font-size: 0.7rem;">VER OBRA</span>' : '<span style="font-size: 2rem;">▶</span>'}
                        </div>
                    `;
                }
                
                slot.innerHTML = innerHTML;

                // Eventos de Clique
                slot.onclick = (e) => {
                    // Se clicar nas laterais, navega
                    if (slot.classList.contains('left')) {
                        updateState(callbackState, -1, data.length);
                    } else if (slot.classList.contains('right')) {
                        updateState(callbackState, 1, data.length);
                    } else if (slot.classList.contains('center')) {
                        // Ação do Centro
                        handleCenterClick(slot, item, type);
                    }
                };

                // Play on Hover (Video)
                if (type === 'vid') {
                    slot.onmouseenter = () => { if(slot.querySelector('video')) slot.querySelector('video').play(); };
                    slot.onmouseleave = () => { if(slot.querySelector('video')) slot.querySelector('video').pause(); };
                }

                container.appendChild(slot);
            });
        }

        // Atualizador de Estado Genérico
        function updateState(target, direction, length) {
            if (target === 'hero') {
                idxHero = (idxHero + direction + length) % length;
                renderAll();
                updateHeroText();
            } else if (target === 'acervo') {
                idxAcervo = (idxAcervo + direction + length) % length;
                renderAll();
            } else if (target === 'memo') {
                idxMemo = (idxMemo + direction + length) % length;
                renderAll();
            }
        }

        // Lógica de Clique Central
        function handleCenterClick(slot, item, type) {
            if (type === 'hero') {
                // Abre Modal Hero
                document.getElementById('hero-modal-img').src = item.src;
                document.getElementById('hero-modal-title').innerText = item.title;
                toggleHeroModal(true);
            } else if (type === 'img') {
                // 1º Clique: Info, 2º Clique: Link
                if (!slot.classList.contains('show-info')) {
                    slot.classList.add('show-info');
                } else {
                    window.location.href = item.link;
                }
            } else if (type === 'vid') {
                // Expandir Video (Simples Play/Pause no centro com som)
                const vid = slot.querySelector('video');
                if (vid.muted) {
                    vid.muted = false;
                    vid.currentTime = 0;
                    vid.play();
                } else {
                    vid.muted = true;
                }
            }
        }

        function updateHeroText() {
            const textBox = document.getElementById('hero-text-box');
            textBox.classList.remove('visible');
            setTimeout(() => {
                document.getElementById('hero-title-el').innerText = dataHero[idxHero].title;
                document.getElementById('hero-meta-el').innerText = dataHero[idxHero].meta;
                textBox.classList.add('visible');
            }, 300);
        }

        function toggleHeroModal(show) {
            const modal = document.getElementById('hero-modal');
            if (show) modal.classList.add('active');
            else modal.classList.remove('active');
        }

        function renderAll() {
            renderCarousel('hero-track', dataHero, idxHero, 'hero', 'hero');
            renderCarousel('acervo-track', dataAcervo, idxAcervo, 'img', 'acervo');
            renderCarousel('memorias-track', dataMemorias, idxMemo, 'vid', 'memo');
        }

        // === EFEITO "SOUL PULSE" (LOGO INTERACTION) ===
        const logoBtn = document.getElementById('logo-trigger');
        const pulse = document.getElementById('soul-pulse');
        const nodes = [document.getElementById('node-1'), document.getElementById('node-2'), document.getElementById('node-3')];
        const sections = [document.getElementById('section-hero'), document.getElementById('section-acervo'), document.getElementById('section-memorias')];

        logoBtn.addEventListener('click', () => {
            // Ativa Logo
            logoBtn.classList.add('active');
            
            // Reseta animação do pulso
            pulse.style.transition = 'none';
            pulse.style.transform = 'translateX(-50%) translateY(-200px)';
            pulse.style.opacity = '1';
            
            // Força reflow
            void pulse.offsetWidth;
            
            // Dispara Pulso descendo
            pulse.style.transition = 'transform 2.5s linear, opacity 2.5s ease-in';
            pulse.style.transform = 'translateX(-50%) translateY(300vh)'; // Vai até o fim da página
            
            // Timers para acender os nós conforme o pulso passa (Sincronia visual)
            setTimeout(() => { nodes[0].classList.add('lit'); }, 500); // Hero Node
            setTimeout(() => { nodes[1].classList.add('lit'); }, 1200); // Acervo Node
            setTimeout(() => { nodes[2].classList.add('lit'); }, 1900); // Memórias Node
            
            // Apaga o pulso no final
            setTimeout(() => { 
                pulse.style.opacity = '0'; 
                logoBtn.classList.remove('active');
                nodes.forEach(n => n.classList.remove('lit'));
            }, 2500);
        });

        // Inicializa
        document.addEventListener('DOMContentLoaded', () => {
            renderAll();
            updateHeroText();
        });
        
        document.addEventListener('keydown', (e) => {
            if(e.key === 'Escape') toggleHeroModal(false);
        });

    </script>
</body>
</html>
